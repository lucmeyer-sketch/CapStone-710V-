{"ast":null,"code":"import { supabase } from '../supabaseClient';\n// obtener todos los estudiantes\nexport const getAllStudents = async () => {\n  const {\n    data,\n    error\n  } = await supabase.from('Estudiantes').select('*').order('apellido', {\n    ascending: true\n  });\n  if (error) throw error;\n\n  // mapear a la estructura esperada por el frontend\n  return (data || []).map(student => ({\n    id: String(student.id),\n    // convertir number a string para el frontend\n    name: student.nombre || '',\n    lastName: student.apellido || '',\n    email: student.email || '',\n    grade: student.grade || student.grado || '',\n    section: student.section || student.seccion || '',\n    attendance: [],\n    grades: []\n  }));\n};\n\n// obtener estudiante por ID\nexport const getStudentById = async id => {\n  const {\n    data,\n    error\n  } = await supabase.from('Estudiantes').select('*').eq('id', id).single();\n  if (error) throw error;\n  if (!data) return null;\n  return {\n    id: data.id,\n    name: data.nombre || '',\n    lastName: data.apellido || '',\n    email: data.email || '',\n    grade: data.grade || data.grado || '',\n    section: data.section || data.seccion || '',\n    attendance: [],\n    grades: []\n  };\n};\n\n// obtener estudiantes por grado y sección\nexport const getStudentsByGradeAndSection = async (grade, section) => {\n  const gradeField = 'grade'; // intentar con 'grade' primero\n  const sectionField = 'section'; // intentar con 'section' primero\n\n  const {\n    data,\n    error\n  } = await supabase.from('Estudiantes').select('*').order('apellido', {\n    ascending: true\n  });\n  if (error) throw error;\n\n  // filtrar por grado y sección después (más flexible)\n  return (data || []).filter(student => {\n    const studentGrade = student.grade || student.grado || '';\n    const studentSection = student.section || student.seccion || '';\n    return studentGrade === grade && studentSection === section;\n  }).map(student => ({\n    id: String(student.id),\n    // convertir number a string para el frontend\n    name: student.nombre || '',\n    lastName: student.apellido || '',\n    email: student.email || '',\n    grade: student.grade || student.grado || '',\n    section: student.section || student.seccion || '',\n    attendance: [],\n    grades: []\n  }));\n};\n\n// crear estudiante\nexport const createStudent = async student => {\n  const {\n    data,\n    error\n  } = await supabase.from('Estudiantes').insert({\n    nombre: student.name,\n    apellido: student.lastName,\n    email: student.email,\n    grade: student.grade,\n    section: student.section\n  }).select().single();\n  if (error) throw error;\n  return {\n    id: String(data.id),\n    // convertir number a string para el frontend\n    name: data.nombre || '',\n    lastName: data.apellido || '',\n    email: data.email || '',\n    grade: data.grade || data.grado || '',\n    section: data.section || data.seccion || '',\n    attendance: [],\n    grades: []\n  };\n};\n\n// actualizar estudiante\nexport const updateStudent = async (id, student) => {\n  const updateData = {};\n  if (student.name) updateData.nombre = student.name;\n  if (student.lastName) updateData.apellido = student.lastName;\n  if (student.email) updateData.email = student.email;\n  if (student.grade) updateData.grade = student.grade;\n  if (student.section) updateData.section = student.section;\n  const {\n    data,\n    error\n  } = await supabase.from('Estudiantes').update(updateData).eq('id', id).select().single();\n  if (error) throw error;\n  return {\n    id: data.id,\n    name: data.nombre || '',\n    lastName: data.apellido || '',\n    email: data.email || '',\n    grade: data.grade || data.grado || '',\n    section: data.section || data.seccion || '',\n    attendance: [],\n    grades: []\n  };\n};\n\n// eliminar estudiante\nexport const deleteStudent = async id => {\n  const {\n    error\n  } = await supabase.from('Estudiantes').delete().eq('id', id);\n  if (error) throw error;\n};","map":{"version":3,"names":["supabase","getAllStudents","data","error","from","select","order","ascending","map","student","id","String","name","nombre","lastName","apellido","email","grade","grado","section","seccion","attendance","grades","getStudentById","eq","single","getStudentsByGradeAndSection","gradeField","sectionField","filter","studentGrade","studentSection","createStudent","insert","updateStudent","updateData","update","deleteStudent","delete"],"sources":["C:/Users/diego/OneDrive/Escritorio/ProyectoAPT/CapStone-710V-/src/services/studentService.ts"],"sourcesContent":["import { supabase } from '../supabaseClient';\r\nimport { Student } from '../types';\r\n\r\n// obtener todos los estudiantes\r\nexport const getAllStudents = async (): Promise<Student[]> => {\r\n  const { data, error } = await supabase\r\n    .from('Estudiantes')\r\n    .select('*')\r\n    .order('apellido', { ascending: true });\r\n\r\n  if (error) throw error;\r\n  \r\n  // mapear a la estructura esperada por el frontend\r\n  return (data || []).map(student => ({\r\n    id: String(student.id), // convertir number a string para el frontend\r\n    name: student.nombre || '',\r\n    lastName: student.apellido || '',\r\n    email: student.email || '',\r\n    grade: student.grade || student.grado || '',\r\n    section: student.section || student.seccion || '',\r\n    attendance: [],\r\n    grades: [],\r\n  }));\r\n};\r\n\r\n// obtener estudiante por ID\r\nexport const getStudentById = async (id: string): Promise<Student | null> => {\r\n  const { data, error } = await supabase\r\n    .from('Estudiantes')\r\n    .select('*')\r\n    .eq('id', id)\r\n    .single();\r\n\r\n  if (error) throw error;\r\n  if (!data) return null;\r\n\r\n  return {\r\n    id: data.id,\r\n    name: data.nombre || '',\r\n    lastName: data.apellido || '',\r\n    email: data.email || '',\r\n    grade: data.grade || data.grado || '',\r\n    section: data.section || data.seccion || '',\r\n    attendance: [],\r\n    grades: [],\r\n  };\r\n};\r\n\r\n// obtener estudiantes por grado y sección\r\nexport const getStudentsByGradeAndSection = async (\r\n  grade: string,\r\n  section: string\r\n): Promise<Student[]> => {\r\n  const gradeField = 'grade'; // intentar con 'grade' primero\r\n  const sectionField = 'section'; // intentar con 'section' primero\r\n  \r\n  const { data, error } = await supabase\r\n    .from('Estudiantes')\r\n    .select('*')\r\n    .order('apellido', { ascending: true });\r\n\r\n  if (error) throw error;\r\n\r\n  // filtrar por grado y sección después (más flexible)\r\n  return (data || [])\r\n    .filter(student => {\r\n      const studentGrade = student.grade || student.grado || '';\r\n      const studentSection = student.section || student.seccion || '';\r\n      return studentGrade === grade && studentSection === section;\r\n    })\r\n    .map(student => ({\r\n      id: String(student.id), // convertir number a string para el frontend\r\n      name: student.nombre || '',\r\n      lastName: student.apellido || '',\r\n      email: student.email || '',\r\n      grade: student.grade || student.grado || '',\r\n      section: student.section || student.seccion || '',\r\n      attendance: [],\r\n      grades: [],\r\n    }));\r\n};\r\n\r\n// crear estudiante\r\nexport const createStudent = async (\r\n  student: Omit<Student, 'id' | 'attendance' | 'grades'>\r\n): Promise<Student> => {\r\n  const { data, error } = await supabase\r\n    .from('Estudiantes')\r\n    .insert({\r\n      nombre: student.name,\r\n      apellido: student.lastName,\r\n      email: student.email,\r\n      grade: student.grade,\r\n      section: student.section,\r\n    })\r\n    .select()\r\n    .single();\r\n\r\n  if (error) throw error;\r\n\r\n  return {\r\n    id: String(data.id), // convertir number a string para el frontend\r\n    name: data.nombre || '',\r\n    lastName: data.apellido || '',\r\n    email: data.email || '',\r\n    grade: data.grade || data.grado || '',\r\n    section: data.section || data.seccion || '',\r\n    attendance: [],\r\n    grades: [],\r\n  };\r\n};\r\n\r\n// actualizar estudiante\r\nexport const updateStudent = async (\r\n  id: string,\r\n  student: Partial<Omit<Student, 'id' | 'attendance' | 'grades'>>\r\n): Promise<Student> => {\r\n  const updateData: any = {};\r\n  if (student.name) updateData.nombre = student.name;\r\n  if (student.lastName) updateData.apellido = student.lastName;\r\n  if (student.email) updateData.email = student.email;\r\n  if (student.grade) updateData.grade = student.grade;\r\n  if (student.section) updateData.section = student.section;\r\n\r\n  const { data, error } = await supabase\r\n    .from('Estudiantes')\r\n    .update(updateData)\r\n    .eq('id', id)\r\n    .select()\r\n    .single();\r\n\r\n  if (error) throw error;\r\n\r\n  return {\r\n    id: data.id,\r\n    name: data.nombre || '',\r\n    lastName: data.apellido || '',\r\n    email: data.email || '',\r\n    grade: data.grade || data.grado || '',\r\n    section: data.section || data.seccion || '',\r\n    attendance: [],\r\n    grades: [],\r\n  };\r\n};\r\n\r\n// eliminar estudiante\r\nexport const deleteStudent = async (id: string): Promise<void> => {\r\n  const { error } = await supabase\r\n    .from('Estudiantes')\r\n    .delete()\r\n    .eq('id', id);\r\n\r\n  if (error) throw error;\r\n};\r\n\r\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,mBAAmB;AAG5C;AACA,OAAO,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAgC;EAC5D,MAAM;IAAEC,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CACnCI,IAAI,CAAC,aAAa,CAAC,CACnBC,MAAM,CAAC,GAAG,CAAC,CACXC,KAAK,CAAC,UAAU,EAAE;IAAEC,SAAS,EAAE;EAAK,CAAC,CAAC;EAEzC,IAAIJ,KAAK,EAAE,MAAMA,KAAK;;EAEtB;EACA,OAAO,CAACD,IAAI,IAAI,EAAE,EAAEM,GAAG,CAACC,OAAO,KAAK;IAClCC,EAAE,EAAEC,MAAM,CAACF,OAAO,CAACC,EAAE,CAAC;IAAE;IACxBE,IAAI,EAAEH,OAAO,CAACI,MAAM,IAAI,EAAE;IAC1BC,QAAQ,EAAEL,OAAO,CAACM,QAAQ,IAAI,EAAE;IAChCC,KAAK,EAAEP,OAAO,CAACO,KAAK,IAAI,EAAE;IAC1BC,KAAK,EAAER,OAAO,CAACQ,KAAK,IAAIR,OAAO,CAACS,KAAK,IAAI,EAAE;IAC3CC,OAAO,EAAEV,OAAO,CAACU,OAAO,IAAIV,OAAO,CAACW,OAAO,IAAI,EAAE;IACjDC,UAAU,EAAE,EAAE;IACdC,MAAM,EAAE;EACV,CAAC,CAAC,CAAC;AACL,CAAC;;AAED;AACA,OAAO,MAAMC,cAAc,GAAG,MAAOb,EAAU,IAA8B;EAC3E,MAAM;IAAER,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CACnCI,IAAI,CAAC,aAAa,CAAC,CACnBC,MAAM,CAAC,GAAG,CAAC,CACXmB,EAAE,CAAC,IAAI,EAAEd,EAAE,CAAC,CACZe,MAAM,CAAC,CAAC;EAEX,IAAItB,KAAK,EAAE,MAAMA,KAAK;EACtB,IAAI,CAACD,IAAI,EAAE,OAAO,IAAI;EAEtB,OAAO;IACLQ,EAAE,EAAER,IAAI,CAACQ,EAAE;IACXE,IAAI,EAAEV,IAAI,CAACW,MAAM,IAAI,EAAE;IACvBC,QAAQ,EAAEZ,IAAI,CAACa,QAAQ,IAAI,EAAE;IAC7BC,KAAK,EAAEd,IAAI,CAACc,KAAK,IAAI,EAAE;IACvBC,KAAK,EAAEf,IAAI,CAACe,KAAK,IAAIf,IAAI,CAACgB,KAAK,IAAI,EAAE;IACrCC,OAAO,EAAEjB,IAAI,CAACiB,OAAO,IAAIjB,IAAI,CAACkB,OAAO,IAAI,EAAE;IAC3CC,UAAU,EAAE,EAAE;IACdC,MAAM,EAAE;EACV,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMI,4BAA4B,GAAG,MAAAA,CAC1CT,KAAa,EACbE,OAAe,KACQ;EACvB,MAAMQ,UAAU,GAAG,OAAO,CAAC,CAAC;EAC5B,MAAMC,YAAY,GAAG,SAAS,CAAC,CAAC;;EAEhC,MAAM;IAAE1B,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CACnCI,IAAI,CAAC,aAAa,CAAC,CACnBC,MAAM,CAAC,GAAG,CAAC,CACXC,KAAK,CAAC,UAAU,EAAE;IAAEC,SAAS,EAAE;EAAK,CAAC,CAAC;EAEzC,IAAIJ,KAAK,EAAE,MAAMA,KAAK;;EAEtB;EACA,OAAO,CAACD,IAAI,IAAI,EAAE,EACf2B,MAAM,CAACpB,OAAO,IAAI;IACjB,MAAMqB,YAAY,GAAGrB,OAAO,CAACQ,KAAK,IAAIR,OAAO,CAACS,KAAK,IAAI,EAAE;IACzD,MAAMa,cAAc,GAAGtB,OAAO,CAACU,OAAO,IAAIV,OAAO,CAACW,OAAO,IAAI,EAAE;IAC/D,OAAOU,YAAY,KAAKb,KAAK,IAAIc,cAAc,KAAKZ,OAAO;EAC7D,CAAC,CAAC,CACDX,GAAG,CAACC,OAAO,KAAK;IACfC,EAAE,EAAEC,MAAM,CAACF,OAAO,CAACC,EAAE,CAAC;IAAE;IACxBE,IAAI,EAAEH,OAAO,CAACI,MAAM,IAAI,EAAE;IAC1BC,QAAQ,EAAEL,OAAO,CAACM,QAAQ,IAAI,EAAE;IAChCC,KAAK,EAAEP,OAAO,CAACO,KAAK,IAAI,EAAE;IAC1BC,KAAK,EAAER,OAAO,CAACQ,KAAK,IAAIR,OAAO,CAACS,KAAK,IAAI,EAAE;IAC3CC,OAAO,EAAEV,OAAO,CAACU,OAAO,IAAIV,OAAO,CAACW,OAAO,IAAI,EAAE;IACjDC,UAAU,EAAE,EAAE;IACdC,MAAM,EAAE;EACV,CAAC,CAAC,CAAC;AACP,CAAC;;AAED;AACA,OAAO,MAAMU,aAAa,GAAG,MAC3BvB,OAAsD,IACjC;EACrB,MAAM;IAAEP,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CACnCI,IAAI,CAAC,aAAa,CAAC,CACnB6B,MAAM,CAAC;IACNpB,MAAM,EAAEJ,OAAO,CAACG,IAAI;IACpBG,QAAQ,EAAEN,OAAO,CAACK,QAAQ;IAC1BE,KAAK,EAAEP,OAAO,CAACO,KAAK;IACpBC,KAAK,EAAER,OAAO,CAACQ,KAAK;IACpBE,OAAO,EAAEV,OAAO,CAACU;EACnB,CAAC,CAAC,CACDd,MAAM,CAAC,CAAC,CACRoB,MAAM,CAAC,CAAC;EAEX,IAAItB,KAAK,EAAE,MAAMA,KAAK;EAEtB,OAAO;IACLO,EAAE,EAAEC,MAAM,CAACT,IAAI,CAACQ,EAAE,CAAC;IAAE;IACrBE,IAAI,EAAEV,IAAI,CAACW,MAAM,IAAI,EAAE;IACvBC,QAAQ,EAAEZ,IAAI,CAACa,QAAQ,IAAI,EAAE;IAC7BC,KAAK,EAAEd,IAAI,CAACc,KAAK,IAAI,EAAE;IACvBC,KAAK,EAAEf,IAAI,CAACe,KAAK,IAAIf,IAAI,CAACgB,KAAK,IAAI,EAAE;IACrCC,OAAO,EAAEjB,IAAI,CAACiB,OAAO,IAAIjB,IAAI,CAACkB,OAAO,IAAI,EAAE;IAC3CC,UAAU,EAAE,EAAE;IACdC,MAAM,EAAE;EACV,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMY,aAAa,GAAG,MAAAA,CAC3BxB,EAAU,EACVD,OAA+D,KAC1C;EACrB,MAAM0B,UAAe,GAAG,CAAC,CAAC;EAC1B,IAAI1B,OAAO,CAACG,IAAI,EAAEuB,UAAU,CAACtB,MAAM,GAAGJ,OAAO,CAACG,IAAI;EAClD,IAAIH,OAAO,CAACK,QAAQ,EAAEqB,UAAU,CAACpB,QAAQ,GAAGN,OAAO,CAACK,QAAQ;EAC5D,IAAIL,OAAO,CAACO,KAAK,EAAEmB,UAAU,CAACnB,KAAK,GAAGP,OAAO,CAACO,KAAK;EACnD,IAAIP,OAAO,CAACQ,KAAK,EAAEkB,UAAU,CAAClB,KAAK,GAAGR,OAAO,CAACQ,KAAK;EACnD,IAAIR,OAAO,CAACU,OAAO,EAAEgB,UAAU,CAAChB,OAAO,GAAGV,OAAO,CAACU,OAAO;EAEzD,MAAM;IAAEjB,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CACnCI,IAAI,CAAC,aAAa,CAAC,CACnBgC,MAAM,CAACD,UAAU,CAAC,CAClBX,EAAE,CAAC,IAAI,EAAEd,EAAE,CAAC,CACZL,MAAM,CAAC,CAAC,CACRoB,MAAM,CAAC,CAAC;EAEX,IAAItB,KAAK,EAAE,MAAMA,KAAK;EAEtB,OAAO;IACLO,EAAE,EAAER,IAAI,CAACQ,EAAE;IACXE,IAAI,EAAEV,IAAI,CAACW,MAAM,IAAI,EAAE;IACvBC,QAAQ,EAAEZ,IAAI,CAACa,QAAQ,IAAI,EAAE;IAC7BC,KAAK,EAAEd,IAAI,CAACc,KAAK,IAAI,EAAE;IACvBC,KAAK,EAAEf,IAAI,CAACe,KAAK,IAAIf,IAAI,CAACgB,KAAK,IAAI,EAAE;IACrCC,OAAO,EAAEjB,IAAI,CAACiB,OAAO,IAAIjB,IAAI,CAACkB,OAAO,IAAI,EAAE;IAC3CC,UAAU,EAAE,EAAE;IACdC,MAAM,EAAE;EACV,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMe,aAAa,GAAG,MAAO3B,EAAU,IAAoB;EAChE,MAAM;IAAEP;EAAM,CAAC,GAAG,MAAMH,QAAQ,CAC7BI,IAAI,CAAC,aAAa,CAAC,CACnBkC,MAAM,CAAC,CAAC,CACRd,EAAE,CAAC,IAAI,EAAEd,EAAE,CAAC;EAEf,IAAIP,KAAK,EAAE,MAAMA,KAAK;AACxB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}