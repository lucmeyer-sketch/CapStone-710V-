{"ast":null,"code":"import { supabase } from '../supabaseClient';\n// obtener todos los estudiantes\nexport const getAllStudents = async () => {\n  const {\n    data,\n    error\n  } = await supabase.from('Estudiantes').select('*').order('apellido', {\n    ascending: true\n  });\n  if (error) throw error;\n\n  // mapear a la estructura esperada por el frontend\n  return (data || []).map(student => ({\n    id: student.id,\n    name: student.nombre || '',\n    lastName: student.apellido || '',\n    email: student.email || '',\n    grade: student.grade || student.grado || '',\n    section: student.section || student.seccion || '',\n    attendance: [],\n    grades: []\n  }));\n};\n\n// obtener estudiante por ID\nexport const getStudentById = async id => {\n  const {\n    data,\n    error\n  } = await supabase.from('students').select('*').eq('id', id).single();\n  if (error) throw error;\n  if (!data) return null;\n  return {\n    id: data.id,\n    name: data.name,\n    lastName: data.last_name,\n    email: data.email,\n    grade: data.grade,\n    section: data.section,\n    attendance: [],\n    grades: []\n  };\n};\n\n// obtener estudiantes por grado y sección\nexport const getStudentsByGradeAndSection = async (grade, section) => {\n  const {\n    data,\n    error\n  } = await supabase.from('students').select('*').eq('grade', grade).eq('section', section).order('last_name', {\n    ascending: true\n  });\n  if (error) throw error;\n  return (data || []).map(student => ({\n    id: student.id,\n    name: student.name,\n    lastName: student.last_name,\n    email: student.email,\n    grade: student.grade,\n    section: student.section,\n    attendance: [],\n    grades: []\n  }));\n};\n\n// crear estudiante\nexport const createStudent = async student => {\n  const {\n    data,\n    error\n  } = await supabase.from('students').insert({\n    name: student.name,\n    last_name: student.lastName,\n    email: student.email,\n    grade: student.grade,\n    section: student.section\n  }).select().single();\n  if (error) throw error;\n  return {\n    id: data.id,\n    name: data.name,\n    lastName: data.last_name,\n    email: data.email,\n    grade: data.grade,\n    section: data.section,\n    attendance: [],\n    grades: []\n  };\n};\n\n// actualizar estudiante\nexport const updateStudent = async (id, student) => {\n  const updateData = {};\n  if (student.name) updateData.name = student.name;\n  if (student.lastName) updateData.last_name = student.lastName;\n  if (student.email) updateData.email = student.email;\n  if (student.grade) updateData.grade = student.grade;\n  if (student.section) updateData.section = student.section;\n  const {\n    data,\n    error\n  } = await supabase.from('students').update(updateData).eq('id', id).select().single();\n  if (error) throw error;\n  return {\n    id: data.id,\n    name: data.name,\n    lastName: data.last_name,\n    email: data.email,\n    grade: data.grade,\n    section: data.section,\n    attendance: [],\n    grades: []\n  };\n};\n\n// eliminar estudiante\nexport const deleteStudent = async id => {\n  const {\n    error\n  } = await supabase.from('students').delete().eq('id', id);\n  if (error) throw error;\n};","map":{"version":3,"names":["supabase","getAllStudents","data","error","from","select","order","ascending","map","student","id","name","nombre","lastName","apellido","email","grade","grado","section","seccion","attendance","grades","getStudentById","eq","single","last_name","getStudentsByGradeAndSection","createStudent","insert","updateStudent","updateData","update","deleteStudent","delete"],"sources":["C:/Users/diego/OneDrive/Escritorio/ProyectoAPT/CapStone-710V-/src/services/studentService.ts"],"sourcesContent":["import { supabase } from '../supabaseClient';\r\nimport { Student } from '../types';\r\n\r\n// obtener todos los estudiantes\r\nexport const getAllStudents = async (): Promise<Student[]> => {\r\n  const { data, error } = await supabase\r\n    .from('Estudiantes')\r\n    .select('*')\r\n    .order('apellido', { ascending: true });\r\n\r\n  if (error) throw error;\r\n  \r\n  // mapear a la estructura esperada por el frontend\r\n  return (data || []).map(student => ({\r\n    id: student.id,\r\n    name: student.nombre || '',\r\n    lastName: student.apellido || '',\r\n    email: student.email || '',\r\n    grade: student.grade || student.grado || '',\r\n    section: student.section || student.seccion || '',\r\n    attendance: [],\r\n    grades: [],\r\n  }));\r\n};\r\n\r\n// obtener estudiante por ID\r\nexport const getStudentById = async (id: string): Promise<Student | null> => {\r\n  const { data, error } = await supabase\r\n    .from('students')\r\n    .select('*')\r\n    .eq('id', id)\r\n    .single();\r\n\r\n  if (error) throw error;\r\n  if (!data) return null;\r\n\r\n  return {\r\n    id: data.id,\r\n    name: data.name,\r\n    lastName: data.last_name,\r\n    email: data.email,\r\n    grade: data.grade,\r\n    section: data.section,\r\n    attendance: [],\r\n    grades: [],\r\n  };\r\n};\r\n\r\n// obtener estudiantes por grado y sección\r\nexport const getStudentsByGradeAndSection = async (\r\n  grade: string,\r\n  section: string\r\n): Promise<Student[]> => {\r\n  const { data, error } = await supabase\r\n    .from('students')\r\n    .select('*')\r\n    .eq('grade', grade)\r\n    .eq('section', section)\r\n    .order('last_name', { ascending: true });\r\n\r\n  if (error) throw error;\r\n\r\n  return (data || []).map(student => ({\r\n    id: student.id,\r\n    name: student.name,\r\n    lastName: student.last_name,\r\n    email: student.email,\r\n    grade: student.grade,\r\n    section: student.section,\r\n    attendance: [],\r\n    grades: [],\r\n  }));\r\n};\r\n\r\n// crear estudiante\r\nexport const createStudent = async (\r\n  student: Omit<Student, 'id' | 'attendance' | 'grades'>\r\n): Promise<Student> => {\r\n  const { data, error } = await supabase\r\n    .from('students')\r\n    .insert({\r\n      name: student.name,\r\n      last_name: student.lastName,\r\n      email: student.email,\r\n      grade: student.grade,\r\n      section: student.section,\r\n    })\r\n    .select()\r\n    .single();\r\n\r\n  if (error) throw error;\r\n\r\n  return {\r\n    id: data.id,\r\n    name: data.name,\r\n    lastName: data.last_name,\r\n    email: data.email,\r\n    grade: data.grade,\r\n    section: data.section,\r\n    attendance: [],\r\n    grades: [],\r\n  };\r\n};\r\n\r\n// actualizar estudiante\r\nexport const updateStudent = async (\r\n  id: string,\r\n  student: Partial<Omit<Student, 'id' | 'attendance' | 'grades'>>\r\n): Promise<Student> => {\r\n  const updateData: any = {};\r\n  if (student.name) updateData.name = student.name;\r\n  if (student.lastName) updateData.last_name = student.lastName;\r\n  if (student.email) updateData.email = student.email;\r\n  if (student.grade) updateData.grade = student.grade;\r\n  if (student.section) updateData.section = student.section;\r\n\r\n  const { data, error } = await supabase\r\n    .from('students')\r\n    .update(updateData)\r\n    .eq('id', id)\r\n    .select()\r\n    .single();\r\n\r\n  if (error) throw error;\r\n\r\n  return {\r\n    id: data.id,\r\n    name: data.name,\r\n    lastName: data.last_name,\r\n    email: data.email,\r\n    grade: data.grade,\r\n    section: data.section,\r\n    attendance: [],\r\n    grades: [],\r\n  };\r\n};\r\n\r\n// eliminar estudiante\r\nexport const deleteStudent = async (id: string): Promise<void> => {\r\n  const { error } = await supabase\r\n    .from('students')\r\n    .delete()\r\n    .eq('id', id);\r\n\r\n  if (error) throw error;\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}