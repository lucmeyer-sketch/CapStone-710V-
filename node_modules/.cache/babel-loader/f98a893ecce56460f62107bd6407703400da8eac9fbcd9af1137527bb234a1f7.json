{"ast":null,"code":"import { supabase } from '../supabaseClient';\n// obtener todos los estudiantes\nexport const getAllStudents = async () => {\n  const {\n    data,\n    error\n  } = await supabase.from('Estudiantes').select('*').order('apellido', {\n    ascending: true\n  });\n  if (error) throw error;\n\n  // mapear a la estructura esperada por el frontend\n  return (data || []).map(student => ({\n    id: student.id,\n    name: student.nombre || '',\n    lastName: student.apellido || '',\n    email: student.email || '',\n    grade: student.grade || student.grado || '',\n    section: student.section || student.seccion || '',\n    attendance: [],\n    grades: []\n  }));\n};\n\n// obtener estudiante por ID\nexport const getStudentById = async id => {\n  const {\n    data,\n    error\n  } = await supabase.from('Estudiantes').select('*').eq('id', id).single();\n  if (error) throw error;\n  if (!data) return null;\n  return {\n    id: data.id,\n    name: data.nombre || '',\n    lastName: data.apellido || '',\n    email: data.email || '',\n    grade: data.grade || data.grado || '',\n    section: data.section || data.seccion || '',\n    attendance: [],\n    grades: []\n  };\n};\n\n// obtener estudiantes por grado y sección\nexport const getStudentsByGradeAndSection = async (grade, section) => {\n  const gradeField = 'grade'; // intentar con 'grade' primero\n  const sectionField = 'section'; // intentar con 'section' primero\n\n  const {\n    data,\n    error\n  } = await supabase.from('Estudiantes').select('*').order('apellido', {\n    ascending: true\n  });\n  if (error) throw error;\n\n  // filtrar por grado y sección después (más flexible)\n  return (data || []).filter(student => {\n    const studentGrade = student.grade || student.grado || '';\n    const studentSection = student.section || student.seccion || '';\n    return studentGrade === grade && studentSection === section;\n  }).map(student => ({\n    id: student.id,\n    name: student.nombre || '',\n    lastName: student.apellido || '',\n    email: student.email || '',\n    grade: student.grade || student.grado || '',\n    section: student.section || student.seccion || '',\n    attendance: [],\n    grades: []\n  }));\n};\n\n// crear estudiante\nexport const createStudent = async student => {\n  const {\n    data,\n    error\n  } = await supabase.from('Estudiantes').insert({\n    nombre: student.name,\n    apellido: student.lastName,\n    email: student.email,\n    grade: student.grade,\n    section: student.section\n  }).select().single();\n  if (error) throw error;\n  return {\n    id: data.id,\n    name: data.nombre || '',\n    lastName: data.apellido || '',\n    email: data.email || '',\n    grade: data.grade || data.grado || '',\n    section: data.section || data.seccion || '',\n    attendance: [],\n    grades: []\n  };\n};\n\n// actualizar estudiante\nexport const updateStudent = async (id, student) => {\n  const updateData = {};\n  if (student.name) updateData.name = student.name;\n  if (student.lastName) updateData.last_name = student.lastName;\n  if (student.email) updateData.email = student.email;\n  if (student.grade) updateData.grade = student.grade;\n  if (student.section) updateData.section = student.section;\n  const {\n    data,\n    error\n  } = await supabase.from('students').update(updateData).eq('id', id).select().single();\n  if (error) throw error;\n  return {\n    id: data.id,\n    name: data.name,\n    lastName: data.last_name,\n    email: data.email,\n    grade: data.grade,\n    section: data.section,\n    attendance: [],\n    grades: []\n  };\n};\n\n// eliminar estudiante\nexport const deleteStudent = async id => {\n  const {\n    error\n  } = await supabase.from('students').delete().eq('id', id);\n  if (error) throw error;\n};","map":{"version":3,"names":["supabase","getAllStudents","data","error","from","select","order","ascending","map","student","id","name","nombre","lastName","apellido","email","grade","grado","section","seccion","attendance","grades","getStudentById","eq","single","getStudentsByGradeAndSection","gradeField","sectionField","filter","studentGrade","studentSection","createStudent","insert","updateStudent","updateData","last_name","update","deleteStudent","delete"],"sources":["C:/Users/diego/OneDrive/Escritorio/ProyectoAPT/CapStone-710V-/src/services/studentService.ts"],"sourcesContent":["import { supabase } from '../supabaseClient';\r\nimport { Student } from '../types';\r\n\r\n// obtener todos los estudiantes\r\nexport const getAllStudents = async (): Promise<Student[]> => {\r\n  const { data, error } = await supabase\r\n    .from('Estudiantes')\r\n    .select('*')\r\n    .order('apellido', { ascending: true });\r\n\r\n  if (error) throw error;\r\n  \r\n  // mapear a la estructura esperada por el frontend\r\n  return (data || []).map(student => ({\r\n    id: student.id,\r\n    name: student.nombre || '',\r\n    lastName: student.apellido || '',\r\n    email: student.email || '',\r\n    grade: student.grade || student.grado || '',\r\n    section: student.section || student.seccion || '',\r\n    attendance: [],\r\n    grades: [],\r\n  }));\r\n};\r\n\r\n// obtener estudiante por ID\r\nexport const getStudentById = async (id: string): Promise<Student | null> => {\r\n  const { data, error } = await supabase\r\n    .from('Estudiantes')\r\n    .select('*')\r\n    .eq('id', id)\r\n    .single();\r\n\r\n  if (error) throw error;\r\n  if (!data) return null;\r\n\r\n  return {\r\n    id: data.id,\r\n    name: data.nombre || '',\r\n    lastName: data.apellido || '',\r\n    email: data.email || '',\r\n    grade: data.grade || data.grado || '',\r\n    section: data.section || data.seccion || '',\r\n    attendance: [],\r\n    grades: [],\r\n  };\r\n};\r\n\r\n// obtener estudiantes por grado y sección\r\nexport const getStudentsByGradeAndSection = async (\r\n  grade: string,\r\n  section: string\r\n): Promise<Student[]> => {\r\n  const gradeField = 'grade'; // intentar con 'grade' primero\r\n  const sectionField = 'section'; // intentar con 'section' primero\r\n  \r\n  const { data, error } = await supabase\r\n    .from('Estudiantes')\r\n    .select('*')\r\n    .order('apellido', { ascending: true });\r\n\r\n  if (error) throw error;\r\n\r\n  // filtrar por grado y sección después (más flexible)\r\n  return (data || [])\r\n    .filter(student => {\r\n      const studentGrade = student.grade || student.grado || '';\r\n      const studentSection = student.section || student.seccion || '';\r\n      return studentGrade === grade && studentSection === section;\r\n    })\r\n    .map(student => ({\r\n      id: student.id,\r\n      name: student.nombre || '',\r\n      lastName: student.apellido || '',\r\n      email: student.email || '',\r\n      grade: student.grade || student.grado || '',\r\n      section: student.section || student.seccion || '',\r\n      attendance: [],\r\n      grades: [],\r\n    }));\r\n};\r\n\r\n// crear estudiante\r\nexport const createStudent = async (\r\n  student: Omit<Student, 'id' | 'attendance' | 'grades'>\r\n): Promise<Student> => {\r\n  const { data, error } = await supabase\r\n    .from('Estudiantes')\r\n    .insert({\r\n      nombre: student.name,\r\n      apellido: student.lastName,\r\n      email: student.email,\r\n      grade: student.grade,\r\n      section: student.section,\r\n    })\r\n    .select()\r\n    .single();\r\n\r\n  if (error) throw error;\r\n\r\n  return {\r\n    id: data.id,\r\n    name: data.nombre || '',\r\n    lastName: data.apellido || '',\r\n    email: data.email || '',\r\n    grade: data.grade || data.grado || '',\r\n    section: data.section || data.seccion || '',\r\n    attendance: [],\r\n    grades: [],\r\n  };\r\n};\r\n\r\n// actualizar estudiante\r\nexport const updateStudent = async (\r\n  id: string,\r\n  student: Partial<Omit<Student, 'id' | 'attendance' | 'grades'>>\r\n): Promise<Student> => {\r\n  const updateData: any = {};\r\n  if (student.name) updateData.name = student.name;\r\n  if (student.lastName) updateData.last_name = student.lastName;\r\n  if (student.email) updateData.email = student.email;\r\n  if (student.grade) updateData.grade = student.grade;\r\n  if (student.section) updateData.section = student.section;\r\n\r\n  const { data, error } = await supabase\r\n    .from('students')\r\n    .update(updateData)\r\n    .eq('id', id)\r\n    .select()\r\n    .single();\r\n\r\n  if (error) throw error;\r\n\r\n  return {\r\n    id: data.id,\r\n    name: data.name,\r\n    lastName: data.last_name,\r\n    email: data.email,\r\n    grade: data.grade,\r\n    section: data.section,\r\n    attendance: [],\r\n    grades: [],\r\n  };\r\n};\r\n\r\n// eliminar estudiante\r\nexport const deleteStudent = async (id: string): Promise<void> => {\r\n  const { error } = await supabase\r\n    .from('students')\r\n    .delete()\r\n    .eq('id', id);\r\n\r\n  if (error) throw error;\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}