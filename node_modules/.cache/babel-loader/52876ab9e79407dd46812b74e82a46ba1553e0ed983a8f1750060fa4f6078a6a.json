{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\diego\\\\OneDrive\\\\Escritorio\\\\ProyectoAPT\\\\CapStone-710V-\\\\src\\\\components\\\\Messages\\\\MessagingSystem.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { supabase } from '../../supabaseClient';\nimport { crearMensaje, getConversaciones, getMensajesPorEstudiante, marcarConversacionLeida, getEstadisticasMensajes } from '../../services/mensajeService';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RESPUESTAS_RAPIDAS = ['Â¡Excelente trabajo! Sigue asÃ­ ðŸ‘', 'Necesitamos hablar sobre tu rendimiento acadÃ©mico', 'Por favor, entrega las tareas pendientes', 'Felicitaciones por tu dedicaciÃ³n ðŸŽ‰', 'Tu tutor debe comunicarse conmigo', 'Recuerda asistir a clases puntualmente'];\nconst MessagingSystem = ({\n  usuarioActual\n}) => {\n  _s();\n  var _usuarioActual$detall, _usuarioActual$detall2;\n  const [conversaciones, setConversaciones] = useState([]);\n  const [conversacionActiva, setConversacionActiva] = useState(null);\n  const [mensajesActivos, setMensajesActivos] = useState([]);\n  const [estudiantes, setEstudiantes] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [busqueda, setBusqueda] = useState('');\n  const [mostrarNuevoMensaje, setMostrarNuevoMensaje] = useState(false);\n  const [estadisticas, setEstadisticas] = useState({\n    total: 0,\n    noLeidos: 0,\n    leidos: 0,\n    porTipo: {\n      general: 0,\n      urgente: 0,\n      academico: 0,\n      conductual: 0,\n      felicitacion: 0\n    }\n  });\n\n  // formulario de mensaje\n  const [formMensaje, setFormMensaje] = useState({\n    estudiante_id: '',\n    asunto: '',\n    mensaje: '',\n    tipo: 'general',\n    destinatario_tipo: 'tutor'\n  });\n  const chatEndRef = useRef(null);\n\n  // determinar ID y rol del usuario actual\n  const esDocente = usuarioActual.rol === 'docente';\n  const esEstudiante = usuarioActual.rol === 'estudiante';\n\n  // Para docentes: ID de docentes, Para estudiantes: ID de Estudiantes\n  const usuarioId = ((_usuarioActual$detall = usuarioActual.detalles) === null || _usuarioActual$detall === void 0 ? void 0 : _usuarioActual$detall.id) || 1;\n  const estudianteId = esEstudiante ? (_usuarioActual$detall2 = usuarioActual.detalles) === null || _usuarioActual$detall2 === void 0 ? void 0 : _usuarioActual$detall2.id : null;\n  useEffect(() => {\n    cargarDatos();\n  }, []);\n  useEffect(() => {\n    if (conversacionActiva) {\n      cargarMensajesEstudiante(conversacionActiva);\n    }\n  }, [conversacionActiva]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [mensajesActivos]);\n  const scrollToBottom = () => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const cargarDatos = async () => {\n    try {\n      setLoading(true);\n\n      // cargar estudiantes\n      const {\n        data: estudiantesData,\n        error: estudiantesError\n      } = await supabase.from('Estudiantes').select('id, nombre, apellido, grado, seccion, email').order('apellido', {\n        ascending: true\n      });\n      if (estudiantesError) throw estudiantesError;\n      setEstudiantes(estudiantesData || []);\n\n      // cargar conversaciones (solo para docentes)\n      if (esDocente) {\n        const conversacionesData = await getConversaciones(usuarioId);\n        setConversaciones(conversacionesData);\n\n        // cargar estadÃ­sticas\n        const stats = await getEstadisticasMensajes(usuarioId);\n        setEstadisticas(stats);\n      } else if (esEstudiante && estudianteId) {\n        // para estudiantes, cargar sus propios mensajes usando el ID de Estudiantes\n        const mensajesEstudiante = await getMensajesPorEstudiante(estudianteId);\n        setMensajesActivos(mensajesEstudiante);\n\n        // actualizar estadÃ­sticas para estudiantes\n        setEstadisticas({\n          total: mensajesEstudiante.length,\n          noLeidos: mensajesEstudiante.filter(m => !m.leido).length,\n          leidos: mensajesEstudiante.filter(m => m.leido).length,\n          porTipo: {\n            general: mensajesEstudiante.filter(m => m.tipo === 'general').length,\n            urgente: mensajesEstudiante.filter(m => m.tipo === 'urgente').length,\n            academico: mensajesEstudiante.filter(m => m.tipo === 'academico').length,\n            conductual: mensajesEstudiante.filter(m => m.tipo === 'conductual').length,\n            felicitacion: mensajesEstudiante.filter(m => m.tipo === 'felicitacion').length\n          }\n        });\n      }\n      setError(null);\n    } catch (err) {\n      setError('Error al cargar datos: ' + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const cargarMensajesEstudiante = async estudianteId => {\n    try {\n      const mensajes = await getMensajesPorEstudiante(estudianteId);\n      setMensajesActivos(mensajes);\n\n      // marcar como leÃ­dos\n      await marcarConversacionLeida(estudianteId);\n\n      // actualizar conversaciones\n      cargarDatos();\n    } catch (err) {\n      setError('Error al cargar mensajes: ' + err.message);\n    }\n  };\n  const handleEnviarMensaje = async e => {\n    e.preventDefault();\n    if (!formMensaje.estudiante_id || !formMensaje.asunto || !formMensaje.mensaje) {\n      setError('Por favor completa todos los campos obligatorios');\n      return;\n    }\n    try {\n      setLoading(true);\n      await crearMensaje({\n        remitente_tipo: usuarioActual.rol,\n        remitente_id: usuarioId,\n        destinatario_tipo: formMensaje.destinatario_tipo,\n        destinatario_id: undefined,\n        // se enviarÃ­a al tutor o estudiante segÃºn el caso\n        estudiante_id: parseInt(formMensaje.estudiante_id),\n        asunto: formMensaje.asunto,\n        mensaje: formMensaje.mensaje,\n        tipo: formMensaje.tipo,\n        leido: false\n      });\n      alert('âœ… Mensaje enviado correctamente');\n      setFormMensaje({\n        estudiante_id: '',\n        asunto: '',\n        mensaje: '',\n        tipo: 'general',\n        destinatario_tipo: 'tutor'\n      });\n      setMostrarNuevoMensaje(false);\n      cargarDatos();\n\n      // si estamos en la conversaciÃ³n de este estudiante, recargar mensajes\n      if (conversacionActiva === parseInt(formMensaje.estudiante_id)) {\n        cargarMensajesEstudiante(conversacionActiva);\n      }\n    } catch (err) {\n      setError('Error al enviar mensaje: ' + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleRespuestaRapida = respuesta => {\n    setFormMensaje({\n      ...formMensaje,\n      mensaje: respuesta\n    });\n  };\n  const getTipoColor = tipo => {\n    switch (tipo) {\n      case 'urgente':\n        return {\n          bg: '#fee2e2',\n          text: '#991b1b',\n          icon: 'ðŸš¨'\n        };\n      case 'academico':\n        return {\n          bg: '#dbeafe',\n          text: '#1e40af',\n          icon: 'ðŸ“š'\n        };\n      case 'conductual':\n        return {\n          bg: '#fef3c7',\n          text: '#92400e',\n          icon: 'âš ï¸'\n        };\n      case 'felicitacion':\n        return {\n          bg: '#dcfce7',\n          text: '#166534',\n          icon: 'ðŸŽ‰'\n        };\n      default:\n        return {\n          bg: '#f3f4f6',\n          text: '#374151',\n          icon: 'ðŸ’¬'\n        };\n    }\n  };\n  const getTipoBadge = tipo => {\n    const colores = getTipoColor(tipo);\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        backgroundColor: colores.bg,\n        color: colores.text,\n        padding: '4px 10px',\n        borderRadius: '12px',\n        fontSize: '11px',\n        fontWeight: '600',\n        display: 'inline-flex',\n        alignItems: 'center',\n        gap: '4px'\n      },\n      children: [colores.icon, \" \", tipo.toUpperCase()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this);\n  };\n  const estudiantesFiltrados = estudiantes.filter(est => {\n    var _est$email;\n    return `${est.nombre} ${est.apellido}`.toLowerCase().includes(busqueda.toLowerCase()) || ((_est$email = est.email) === null || _est$email === void 0 ? void 0 : _est$email.toLowerCase().includes(busqueda.toLowerCase()));\n  });\n  const conversacionesFiltradas = conversaciones.filter(conv => `${conv.estudiante_nombre} ${conv.estudiante_apellido}`.toLowerCase().includes(busqueda.toLowerCase()));\n  const estudianteActivo = conversacionActiva ? conversaciones.find(c => c.estudiante_id === conversacionActiva) : null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: 'calc(100vh - 80px)',\n      display: 'flex',\n      flexDirection: 'column',\n      backgroundColor: '#f9fafb'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '20px',\n        backgroundColor: 'white',\n        borderBottom: '1px solid #e5e7eb'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          fontSize: '28px',\n          fontWeight: '700',\n          color: '#1a1a1a',\n          marginBottom: '16px'\n        },\n        children: [\"\\uD83D\\uDCAC \", esEstudiante ? 'Mis Mensajes' : 'Sistema de MensajerÃ­a']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '12px 16px',\n          backgroundColor: '#fee2e2',\n          border: '1px solid #fecaca',\n          color: '#b91c1c',\n          borderRadius: '8px',\n          marginBottom: '16px',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setError(null),\n          style: {\n            marginLeft: 'auto',\n            background: 'none',\n            border: 'none',\n            fontSize: '18px',\n            cursor: 'pointer',\n            color: '#b91c1c'\n          },\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\n          gap: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: '#ede9fe',\n            padding: '16px',\n            borderRadius: '10px',\n            border: '1px solid #ddd6fe'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: '700',\n              color: '#7c3aed'\n            },\n            children: estadisticas.total\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: '#6d28d9',\n              fontWeight: '500'\n            },\n            children: \"Total Mensajes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: '#dbeafe',\n            padding: '16px',\n            borderRadius: '10px',\n            border: '1px solid #bfdbfe'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: '700',\n              color: '#2563eb'\n            },\n            children: conversaciones.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: '#1d4ed8',\n              fontWeight: '500'\n            },\n            children: \"Conversaciones\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: '#fef3c7',\n            padding: '16px',\n            borderRadius: '10px',\n            border: '1px solid #fde68a'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: '700',\n              color: '#d97706'\n            },\n            children: estadisticas.noLeidos\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: '#b45309',\n              fontWeight: '500'\n            },\n            children: \"Sin Leer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: '#dcfce7',\n            padding: '16px',\n            borderRadius: '10px',\n            border: '1px solid #a7f3d0'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: '700',\n              color: '#059669'\n            },\n            children: estadisticas.leidos\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: '#047857',\n              fontWeight: '500'\n            },\n            children: \"Le\\xEDdos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        display: 'flex',\n        overflow: 'hidden'\n      },\n      children: [esDocente && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '350px',\n          backgroundColor: 'white',\n          borderRight: '1px solid #e5e7eb',\n          display: 'flex',\n          flexDirection: 'column'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '16px',\n            borderBottom: '1px solid #e5e7eb'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '12px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"\\uD83D\\uDD0D Buscar conversaci\\xF3n...\",\n              value: busqueda,\n              onChange: e => setBusqueda(e.target.value),\n              style: {\n                width: '100%',\n                padding: '10px 12px',\n                border: '1px solid #d1d5db',\n                borderRadius: '8px',\n                fontSize: '14px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setMostrarNuevoMensaje(true),\n            style: {\n              width: '100%',\n              backgroundColor: '#3b82f6',\n              color: 'white',\n              padding: '10px',\n              borderRadius: '8px',\n              border: 'none',\n              fontSize: '14px',\n              fontWeight: '600',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              gap: '8px'\n            },\n            children: \"\\u270F\\uFE0F Nuevo Mensaje\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1,\n            overflowY: 'auto'\n          },\n          children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '40px',\n              textAlign: 'center',\n              color: '#9ca3af'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '32px',\n                marginBottom: '12px'\n              },\n              children: \"\\u23F3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Cargando...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this) : conversacionesFiltradas.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '40px',\n              textAlign: 'center',\n              color: '#9ca3af'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '48px',\n                marginBottom: '12px'\n              },\n              children: \"\\uD83D\\uDCED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '14px'\n              },\n              children: \"No hay conversaciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this) : conversacionesFiltradas.map(conv => /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => setConversacionActiva(conv.estudiante_id),\n            style: {\n              padding: '16px',\n              borderBottom: '1px solid #f3f4f6',\n              cursor: 'pointer',\n              backgroundColor: conversacionActiva === conv.estudiante_id ? '#f0f9ff' : 'white',\n              transition: 'background-color 0.2s'\n            },\n            onMouseOver: e => {\n              if (conversacionActiva !== conv.estudiante_id) {\n                e.currentTarget.style.backgroundColor = '#f9fafb';\n              }\n            },\n            onMouseOut: e => {\n              if (conversacionActiva !== conv.estudiante_id) {\n                e.currentTarget.style.backgroundColor = 'white';\n              }\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '12px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: '48px',\n                  height: '48px',\n                  borderRadius: '50%',\n                  backgroundColor: '#e0e7ff',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: '20px',\n                  fontWeight: '600',\n                  color: '#4f46e5',\n                  flexShrink: 0\n                },\n                children: [conv.estudiante_nombre.charAt(0), conv.estudiante_apellido.charAt(0)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1,\n                  minWidth: 0\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    marginBottom: '4px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: '600',\n                      color: '#1f2937',\n                      fontSize: '14px'\n                    },\n                    children: [conv.estudiante_apellido, \" \", conv.estudiante_nombre]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 25\n                  }, this), conv.mensajes_no_leidos > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      backgroundColor: '#3b82f6',\n                      color: 'white',\n                      borderRadius: '12px',\n                      padding: '2px 8px',\n                      fontSize: '11px',\n                      fontWeight: '700'\n                    },\n                    children: conv.mensajes_no_leidos\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '11px',\n                    color: '#9ca3af',\n                    marginBottom: '4px'\n                  },\n                  children: [conv.estudiante_grado, conv.estudiante_seccion]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '13px',\n                    color: '#6b7280',\n                    whiteSpace: 'nowrap',\n                    overflow: 'hidden',\n                    textOverflow: 'ellipsis'\n                  },\n                  children: conv.ultimo_mensaje\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: '4px'\n                  },\n                  children: getTipoBadge(conv.ultimo_mensaje_tipo)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 19\n            }, this)\n          }, conv.estudiante_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          display: 'flex',\n          flexDirection: 'column',\n          backgroundColor: '#f9fafb'\n        },\n        children: mostrarNuevoMensaje ?\n        /*#__PURE__*/\n        // Formulario nuevo mensaje\n        _jsxDEV(\"div\", {\n          style: {\n            flex: 1,\n            padding: '24px',\n            overflowY: 'auto'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              maxWidth: '700px',\n              margin: '0 auto'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                backgroundColor: 'white',\n                borderRadius: '12px',\n                padding: '24px',\n                boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\n                border: '1px solid #e5e7eb'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  marginBottom: '24px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  style: {\n                    fontSize: '20px',\n                    fontWeight: '600',\n                    color: '#374151'\n                  },\n                  children: \"\\u270F\\uFE0F Nuevo Mensaje\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setMostrarNuevoMensaje(false),\n                  style: {\n                    background: 'none',\n                    border: 'none',\n                    fontSize: '24px',\n                    cursor: 'pointer',\n                    color: '#9ca3af'\n                  },\n                  children: \"\\u2715\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleEnviarMensaje,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginBottom: '20px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: labelStyle,\n                    children: \"Estudiante *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 499,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: formMensaje.estudiante_id,\n                    onChange: e => setFormMensaje({\n                      ...formMensaje,\n                      estudiante_id: e.target.value\n                    }),\n                    style: inputStyle,\n                    required: true,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Seleccionar estudiante\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 506,\n                      columnNumber: 25\n                    }, this), estudiantesFiltrados.map(est => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: est.id,\n                      children: [est.apellido, \" \", est.nombre, \" - \", est.grado, est.seccion]\n                    }, est.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 508,\n                      columnNumber: 27\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 500,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'grid',\n                    gridTemplateColumns: '1fr 1fr',\n                    gap: '16px',\n                    marginBottom: '20px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      style: labelStyle,\n                      children: \"Destinatario *\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 517,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: formMensaje.destinatario_tipo,\n                      onChange: e => setFormMensaje({\n                        ...formMensaje,\n                        destinatario_tipo: e.target.value\n                      }),\n                      style: inputStyle,\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"tutor\",\n                        children: \"\\uD83D\\uDC68\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC66 Tutor/Apoderado\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 523,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"estudiante\",\n                        children: \"\\uD83C\\uDF93 Estudiante\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 524,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 518,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 516,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      style: labelStyle,\n                      children: \"Tipo de Mensaje *\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 529,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: formMensaje.tipo,\n                      onChange: e => setFormMensaje({\n                        ...formMensaje,\n                        tipo: e.target.value\n                      }),\n                      style: inputStyle,\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"general\",\n                        children: \"\\uD83D\\uDCAC General\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 535,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"academico\",\n                        children: \"\\uD83D\\uDCDA Acad\\xE9mico\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 536,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"conductual\",\n                        children: \"\\u26A0\\uFE0F Conductual\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 537,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"urgente\",\n                        children: \"\\uD83D\\uDEA8 Urgente\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 538,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"felicitacion\",\n                        children: \"\\uD83C\\uDF89 Felicitaci\\xF3n\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 539,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 530,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 528,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 515,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginBottom: '20px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: labelStyle,\n                    children: \"Asunto *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 545,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: formMensaje.asunto,\n                    onChange: e => setFormMensaje({\n                      ...formMensaje,\n                      asunto: e.target.value\n                    }),\n                    style: inputStyle,\n                    placeholder: \"Ej: Revisi\\xF3n de calificaciones\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 546,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginBottom: '16px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: labelStyle,\n                    children: \"Mensaje *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 557,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: formMensaje.mensaje,\n                    onChange: e => setFormMensaje({\n                      ...formMensaje,\n                      mensaje: e.target.value\n                    }),\n                    style: {\n                      ...inputStyle,\n                      minHeight: '120px',\n                      resize: 'vertical'\n                    },\n                    placeholder: \"Escribe tu mensaje aqu\\xED...\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 558,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 556,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginBottom: '20px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      ...labelStyle,\n                      marginBottom: '8px'\n                    },\n                    children: \"\\u26A1 Respuestas R\\xE1pidas:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 569,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      flexWrap: 'wrap',\n                      gap: '8px'\n                    },\n                    children: RESPUESTAS_RAPIDAS.map((respuesta, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      onClick: () => handleRespuestaRapida(respuesta),\n                      style: {\n                        backgroundColor: '#f3f4f6',\n                        border: '1px solid #d1d5db',\n                        padding: '6px 12px',\n                        borderRadius: '16px',\n                        fontSize: '12px',\n                        cursor: 'pointer',\n                        transition: 'all 0.2s'\n                      },\n                      onMouseOver: e => {\n                        e.currentTarget.style.backgroundColor = '#e5e7eb';\n                        e.currentTarget.style.borderColor = '#9ca3af';\n                      },\n                      onMouseOut: e => {\n                        e.currentTarget.style.backgroundColor = '#f3f4f6';\n                        e.currentTarget.style.borderColor = '#d1d5db';\n                      },\n                      children: respuesta\n                    }, idx, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 572,\n                      columnNumber: 27\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 570,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 568,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    gap: '12px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    disabled: loading,\n                    style: {\n                      flex: 1,\n                      backgroundColor: loading ? '#9ca3af' : '#10b981',\n                      color: 'white',\n                      padding: '12px',\n                      borderRadius: '8px',\n                      border: 'none',\n                      fontSize: '15px',\n                      fontWeight: '600',\n                      cursor: loading ? 'not-allowed' : 'pointer'\n                    },\n                    children: loading ? 'â³ Enviando...' : 'ðŸ“¤ Enviar Mensaje'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 601,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => setMostrarNuevoMensaje(false),\n                    style: {\n                      backgroundColor: '#6b7280',\n                      color: 'white',\n                      padding: '12px 24px',\n                      borderRadius: '8px',\n                      border: 'none',\n                      fontSize: '15px',\n                      fontWeight: '600',\n                      cursor: 'pointer'\n                    },\n                    children: \"Cancelar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 619,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 600,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 13\n        }, this) : esDocente && conversacionActiva && estudianteActivo || esEstudiante && mensajesActivos.length > 0 ?\n        /*#__PURE__*/\n        // Vista de chat\n        _jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: 'white',\n              padding: '16px 24px',\n              borderBottom: '1px solid #e5e7eb',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '12px'\n            },\n            children: esDocente && estudianteActivo ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: '48px',\n                  height: '48px',\n                  borderRadius: '50%',\n                  backgroundColor: '#e0e7ff',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: '20px',\n                  fontWeight: '600',\n                  color: '#4f46e5'\n                },\n                children: [estudianteActivo.estudiante_nombre.charAt(0), estudianteActivo.estudiante_apellido.charAt(0)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: '600',\n                    fontSize: '16px',\n                    color: '#1f2937'\n                  },\n                  children: [estudianteActivo.estudiante_apellido, \" \", estudianteActivo.estudiante_nombre]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 669,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '13px',\n                    color: '#6b7280'\n                  },\n                  children: [estudianteActivo.estudiante_grado, estudianteActivo.estudiante_seccion, \" \\u2022 \", estudianteActivo.total_mensajes, \" mensajes\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 672,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 668,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setConversacionActiva(null),\n                style: {\n                  background: 'none',\n                  border: 'none',\n                  fontSize: '24px',\n                  cursor: 'pointer',\n                  color: '#9ca3af'\n                },\n                children: \"\\u2715\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) : esEstudiante ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: '48px',\n                  height: '48px',\n                  borderRadius: '50%',\n                  backgroundColor: '#e0e7ff',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: '20px',\n                  fontWeight: '600',\n                  color: '#4f46e5'\n                },\n                children: \"\\uD83D\\uDCE8\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: '600',\n                    fontSize: '16px',\n                    color: '#1f2937'\n                  },\n                  children: \"Mis Mensajes Recibidos\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 706,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '13px',\n                    color: '#6b7280'\n                  },\n                  children: [mensajesActivos.length, \" mensajes \\u2022 \", mensajesActivos.filter(m => !m.leido).length, \" sin leer\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 709,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 705,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1,\n              overflowY: 'auto',\n              padding: '24px',\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '16px'\n            },\n            children: [mensajesActivos.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: 'center',\n                padding: '60px 20px',\n                color: '#9ca3af'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '64px',\n                  marginBottom: '16px'\n                },\n                children: \"\\uD83D\\uDCAC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '16px',\n                  fontWeight: '500',\n                  color: '#6b7280'\n                },\n                children: \"No hay mensajes en esta conversaci\\xF3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 729,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '14px',\n                  marginTop: '8px'\n                },\n                children: \"\\xA1Env\\xEDa el primer mensaje!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 732,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 727,\n              columnNumber: 19\n            }, this) : mensajesActivos.map(mensaje => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'flex-end',\n                marginBottom: '8px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  maxWidth: '70%',\n                  backgroundColor: '#3b82f6',\n                  color: 'white',\n                  padding: '12px 16px',\n                  borderRadius: '16px 16px 4px 16px',\n                  boxShadow: '0 2px 4px rgba(59, 130, 246, 0.3)'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '8px',\n                    marginBottom: '8px'\n                  },\n                  children: [getTipoBadge(mensaje.tipo || 'general'), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: '11px',\n                      opacity: 0.9\n                    },\n                    children: [\"\\u2192 \", mensaje.destinatario_tipo]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 756,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 754,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: '600',\n                    fontSize: '14px',\n                    marginBottom: '8px'\n                  },\n                  children: mensaje.asunto\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 760,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '14px',\n                    lineHeight: '1.5',\n                    marginBottom: '8px'\n                  },\n                  children: mensaje.mensaje\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 763,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '11px',\n                    opacity: 0.8,\n                    textAlign: 'right'\n                  },\n                  children: [new Date(mensaje.created_at).toLocaleString('es-ES', {\n                    day: '2-digit',\n                    month: '2-digit',\n                    year: 'numeric',\n                    hour: '2-digit',\n                    minute: '2-digit'\n                  }), mensaje.leido && ' â€¢ âœ“âœ“ LeÃ­do']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 766,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 746,\n                columnNumber: 23\n              }, this)\n            }, mensaje.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 21\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: chatEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 780,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 15\n          }, this), esDocente && conversacionActiva && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              backgroundColor: 'white',\n              borderTop: '1px solid #e5e7eb',\n              padding: '16px 24px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setFormMensaje({\n                  ...formMensaje,\n                  estudiante_id: conversacionActiva.toString()\n                });\n                setMostrarNuevoMensaje(true);\n              },\n              style: {\n                width: '100%',\n                backgroundColor: '#3b82f6',\n                color: 'white',\n                padding: '12px',\n                borderRadius: '8px',\n                border: 'none',\n                fontSize: '14px',\n                fontWeight: '600',\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '8px'\n              },\n              children: \"\\u270F\\uFE0F Escribir Nuevo Mensaje\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 790,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 785,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) :\n        /*#__PURE__*/\n        // Estado vacÃ­o\n        _jsxDEV(\"div\", {\n          style: {\n            flex: 1,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            flexDirection: 'column',\n            color: '#9ca3af'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '96px',\n              marginBottom: '24px'\n            },\n            children: \"\\uD83D\\uDCAC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 829,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: '20px',\n              fontWeight: '600',\n              color: '#6b7280',\n              marginBottom: '8px'\n            },\n            children: \"Selecciona una conversaci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 830,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '14px'\n            },\n            children: \"o crea un nuevo mensaje con el bot\\xF3n de arriba\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 833,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 821,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 255,\n    columnNumber: 5\n  }, this);\n};\n_s(MessagingSystem, \"HZDC1JW5APPRtVNGKREcf5c98Jw=\");\n_c = MessagingSystem;\nconst labelStyle = {\n  display: 'block',\n  marginBottom: '8px',\n  fontWeight: '500',\n  fontSize: '14px',\n  color: '#374151'\n};\nconst inputStyle = {\n  width: '100%',\n  padding: '10px 12px',\n  border: '1px solid #d1d5db',\n  borderRadius: '8px',\n  fontSize: '14px',\n  outline: 'none'\n};\nexport default MessagingSystem;\nvar _c;\n$RefreshReg$(_c, \"MessagingSystem\");","map":{"version":3,"names":["React","useState","useEffect","useRef","supabase","crearMensaje","getConversaciones","getMensajesPorEstudiante","marcarConversacionLeida","getEstadisticasMensajes","jsxDEV","_jsxDEV","Fragment","_Fragment","RESPUESTAS_RAPIDAS","MessagingSystem","usuarioActual","_s","_usuarioActual$detall","_usuarioActual$detall2","conversaciones","setConversaciones","conversacionActiva","setConversacionActiva","mensajesActivos","setMensajesActivos","estudiantes","setEstudiantes","loading","setLoading","error","setError","busqueda","setBusqueda","mostrarNuevoMensaje","setMostrarNuevoMensaje","estadisticas","setEstadisticas","total","noLeidos","leidos","porTipo","general","urgente","academico","conductual","felicitacion","formMensaje","setFormMensaje","estudiante_id","asunto","mensaje","tipo","destinatario_tipo","chatEndRef","esDocente","rol","esEstudiante","usuarioId","detalles","id","estudianteId","cargarDatos","cargarMensajesEstudiante","scrollToBottom","_chatEndRef$current","current","scrollIntoView","behavior","data","estudiantesData","estudiantesError","from","select","order","ascending","conversacionesData","stats","mensajesEstudiante","length","filter","m","leido","err","message","mensajes","handleEnviarMensaje","e","preventDefault","remitente_tipo","remitente_id","destinatario_id","undefined","parseInt","alert","handleRespuestaRapida","respuesta","getTipoColor","bg","text","icon","getTipoBadge","colores","style","backgroundColor","color","padding","borderRadius","fontSize","fontWeight","display","alignItems","gap","children","toUpperCase","fileName","_jsxFileName","lineNumber","columnNumber","estudiantesFiltrados","est","_est$email","nombre","apellido","toLowerCase","includes","email","conversacionesFiltradas","conv","estudiante_nombre","estudiante_apellido","estudianteActivo","find","c","height","flexDirection","borderBottom","marginBottom","border","onClick","marginLeft","background","cursor","gridTemplateColumns","flex","overflow","width","borderRight","type","placeholder","value","onChange","target","justifyContent","overflowY","textAlign","map","transition","onMouseOver","currentTarget","onMouseOut","flexShrink","charAt","minWidth","mensajes_no_leidos","estudiante_grado","estudiante_seccion","whiteSpace","textOverflow","ultimo_mensaje","marginTop","ultimo_mensaje_tipo","maxWidth","margin","boxShadow","onSubmit","labelStyle","inputStyle","required","grado","seccion","minHeight","resize","flexWrap","idx","borderColor","disabled","total_mensajes","opacity","lineHeight","Date","created_at","toLocaleString","day","month","year","hour","minute","ref","borderTop","toString","_c","outline","$RefreshReg$"],"sources":["C:/Users/diego/OneDrive/Escritorio/ProyectoAPT/CapStone-710V-/src/components/Messages/MessagingSystem.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { supabase } from '../../supabaseClient';\r\nimport {\r\n  crearMensaje,\r\n  getConversaciones,\r\n  getMensajesPorEstudiante,\r\n  marcarConversacionLeida,\r\n  getEstadisticasMensajes,\r\n  Conversacion,\r\n  MensajeConDetalles\r\n} from '../../services/mensajeService';\r\nimport { UsuarioConDetalles } from '../../services/authService';\r\n\r\ninterface Estudiante {\r\n  id: number;\r\n  nombre: string;\r\n  apellido: string;\r\n  grado?: string;\r\n  seccion?: string;\r\n  email?: string;\r\n}\r\n\r\ninterface MessagingSystemProps {\r\n  usuarioActual: UsuarioConDetalles;\r\n}\r\n\r\nconst RESPUESTAS_RAPIDAS = [\r\n  'Â¡Excelente trabajo! Sigue asÃ­ ðŸ‘',\r\n  'Necesitamos hablar sobre tu rendimiento acadÃ©mico',\r\n  'Por favor, entrega las tareas pendientes',\r\n  'Felicitaciones por tu dedicaciÃ³n ðŸŽ‰',\r\n  'Tu tutor debe comunicarse conmigo',\r\n  'Recuerda asistir a clases puntualmente'\r\n];\r\n\r\nconst MessagingSystem: React.FC<MessagingSystemProps> = ({ usuarioActual }) => {\r\n  const [conversaciones, setConversaciones] = useState<Conversacion[]>([]);\r\n  const [conversacionActiva, setConversacionActiva] = useState<number | null>(null);\r\n  const [mensajesActivos, setMensajesActivos] = useState<MensajeConDetalles[]>([]);\r\n  const [estudiantes, setEstudiantes] = useState<Estudiante[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [busqueda, setBusqueda] = useState('');\r\n  const [mostrarNuevoMensaje, setMostrarNuevoMensaje] = useState(false);\r\n  \r\n  const [estadisticas, setEstadisticas] = useState({\r\n    total: 0,\r\n    noLeidos: 0,\r\n    leidos: 0,\r\n    porTipo: {\r\n      general: 0,\r\n      urgente: 0,\r\n      academico: 0,\r\n      conductual: 0,\r\n      felicitacion: 0\r\n    }\r\n  });\r\n\r\n  // formulario de mensaje\r\n  const [formMensaje, setFormMensaje] = useState({\r\n    estudiante_id: '',\r\n    asunto: '',\r\n    mensaje: '',\r\n    tipo: 'general' as 'general' | 'urgente' | 'academico' | 'conductual' | 'felicitacion',\r\n    destinatario_tipo: 'tutor' as 'tutor' | 'estudiante'\r\n  });\r\n\r\n  const chatEndRef = useRef<HTMLDivElement>(null);\r\n  \r\n  // determinar ID y rol del usuario actual\r\n  const esDocente = usuarioActual.rol === 'docente';\r\n  const esEstudiante = usuarioActual.rol === 'estudiante';\r\n  \r\n  // Para docentes: ID de docentes, Para estudiantes: ID de Estudiantes\r\n  const usuarioId = usuarioActual.detalles?.id || 1;\r\n  const estudianteId = esEstudiante ? usuarioActual.detalles?.id : null;\r\n\r\n  useEffect(() => {\r\n    cargarDatos();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (conversacionActiva) {\r\n      cargarMensajesEstudiante(conversacionActiva);\r\n    }\r\n  }, [conversacionActiva]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [mensajesActivos]);\r\n\r\n  const scrollToBottom = () => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const cargarDatos = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // cargar estudiantes\r\n      const { data: estudiantesData, error: estudiantesError } = await supabase\r\n        .from('Estudiantes')\r\n        .select('id, nombre, apellido, grado, seccion, email')\r\n        .order('apellido', { ascending: true });\r\n\r\n      if (estudiantesError) throw estudiantesError;\r\n      setEstudiantes(estudiantesData || []);\r\n\r\n      // cargar conversaciones (solo para docentes)\r\n      if (esDocente) {\r\n        const conversacionesData = await getConversaciones(usuarioId);\r\n        setConversaciones(conversacionesData);\r\n\r\n        // cargar estadÃ­sticas\r\n        const stats = await getEstadisticasMensajes(usuarioId);\r\n        setEstadisticas(stats);\r\n      } else if (esEstudiante && estudianteId) {\r\n        // para estudiantes, cargar sus propios mensajes usando el ID de Estudiantes\r\n        const mensajesEstudiante = await getMensajesPorEstudiante(estudianteId);\r\n        setMensajesActivos(mensajesEstudiante);\r\n        \r\n        // actualizar estadÃ­sticas para estudiantes\r\n        setEstadisticas({\r\n          total: mensajesEstudiante.length,\r\n          noLeidos: mensajesEstudiante.filter(m => !m.leido).length,\r\n          leidos: mensajesEstudiante.filter(m => m.leido).length,\r\n          porTipo: {\r\n            general: mensajesEstudiante.filter(m => m.tipo === 'general').length,\r\n            urgente: mensajesEstudiante.filter(m => m.tipo === 'urgente').length,\r\n            academico: mensajesEstudiante.filter(m => m.tipo === 'academico').length,\r\n            conductual: mensajesEstudiante.filter(m => m.tipo === 'conductual').length,\r\n            felicitacion: mensajesEstudiante.filter(m => m.tipo === 'felicitacion').length\r\n          }\r\n        });\r\n      }\r\n\r\n      setError(null);\r\n    } catch (err: any) {\r\n      setError('Error al cargar datos: ' + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const cargarMensajesEstudiante = async (estudianteId: number) => {\r\n    try {\r\n      const mensajes = await getMensajesPorEstudiante(estudianteId);\r\n      setMensajesActivos(mensajes);\r\n      \r\n      // marcar como leÃ­dos\r\n      await marcarConversacionLeida(estudianteId);\r\n      \r\n      // actualizar conversaciones\r\n      cargarDatos();\r\n    } catch (err: any) {\r\n      setError('Error al cargar mensajes: ' + err.message);\r\n    }\r\n  };\r\n\r\n  const handleEnviarMensaje = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!formMensaje.estudiante_id || !formMensaje.asunto || !formMensaje.mensaje) {\r\n      setError('Por favor completa todos los campos obligatorios');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      await crearMensaje({\r\n        remitente_tipo: usuarioActual.rol as any,\r\n        remitente_id: usuarioId,\r\n        destinatario_tipo: formMensaje.destinatario_tipo,\r\n        destinatario_id: undefined, // se enviarÃ­a al tutor o estudiante segÃºn el caso\r\n        estudiante_id: parseInt(formMensaje.estudiante_id),\r\n        asunto: formMensaje.asunto,\r\n        mensaje: formMensaje.mensaje,\r\n        tipo: formMensaje.tipo,\r\n        leido: false\r\n      });\r\n\r\n      alert('âœ… Mensaje enviado correctamente');\r\n      \r\n      setFormMensaje({\r\n        estudiante_id: '',\r\n        asunto: '',\r\n        mensaje: '',\r\n        tipo: 'general',\r\n        destinatario_tipo: 'tutor'\r\n      });\r\n\r\n      setMostrarNuevoMensaje(false);\r\n      cargarDatos();\r\n\r\n      // si estamos en la conversaciÃ³n de este estudiante, recargar mensajes\r\n      if (conversacionActiva === parseInt(formMensaje.estudiante_id)) {\r\n        cargarMensajesEstudiante(conversacionActiva);\r\n      }\r\n\r\n    } catch (err: any) {\r\n      setError('Error al enviar mensaje: ' + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRespuestaRapida = (respuesta: string) => {\r\n    setFormMensaje({ ...formMensaje, mensaje: respuesta });\r\n  };\r\n\r\n  const getTipoColor = (tipo: string) => {\r\n    switch (tipo) {\r\n      case 'urgente': return { bg: '#fee2e2', text: '#991b1b', icon: 'ðŸš¨' };\r\n      case 'academico': return { bg: '#dbeafe', text: '#1e40af', icon: 'ðŸ“š' };\r\n      case 'conductual': return { bg: '#fef3c7', text: '#92400e', icon: 'âš ï¸' };\r\n      case 'felicitacion': return { bg: '#dcfce7', text: '#166534', icon: 'ðŸŽ‰' };\r\n      default: return { bg: '#f3f4f6', text: '#374151', icon: 'ðŸ’¬' };\r\n    }\r\n  };\r\n\r\n  const getTipoBadge = (tipo: string) => {\r\n    const colores = getTipoColor(tipo);\r\n    return (\r\n      <span style={{\r\n        backgroundColor: colores.bg,\r\n        color: colores.text,\r\n        padding: '4px 10px',\r\n        borderRadius: '12px',\r\n        fontSize: '11px',\r\n        fontWeight: '600',\r\n        display: 'inline-flex',\r\n        alignItems: 'center',\r\n        gap: '4px'\r\n      }}>\r\n        {colores.icon} {tipo.toUpperCase()}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const estudiantesFiltrados = estudiantes.filter(est =>\r\n    `${est.nombre} ${est.apellido}`.toLowerCase().includes(busqueda.toLowerCase()) ||\r\n    est.email?.toLowerCase().includes(busqueda.toLowerCase())\r\n  );\r\n\r\n  const conversacionesFiltradas = conversaciones.filter(conv =>\r\n    `${conv.estudiante_nombre} ${conv.estudiante_apellido}`.toLowerCase().includes(busqueda.toLowerCase())\r\n  );\r\n\r\n  const estudianteActivo = conversacionActiva \r\n    ? conversaciones.find(c => c.estudiante_id === conversacionActiva)\r\n    : null;\r\n\r\n  return (\r\n    <div style={{ height: 'calc(100vh - 80px)', display: 'flex', flexDirection: 'column', backgroundColor: '#f9fafb' }}>\r\n      {/* Header con EstadÃ­sticas */}\r\n      <div style={{ padding: '20px', backgroundColor: 'white', borderBottom: '1px solid #e5e7eb' }}>\r\n        <h1 style={{ fontSize: '28px', fontWeight: '700', color: '#1a1a1a', marginBottom: '16px' }}>\r\n          ðŸ’¬ {esEstudiante ? 'Mis Mensajes' : 'Sistema de MensajerÃ­a'}\r\n        </h1>\r\n\r\n        {error && (\r\n          <div style={{\r\n            padding: '12px 16px',\r\n            backgroundColor: '#fee2e2',\r\n            border: '1px solid #fecaca',\r\n            color: '#b91c1c',\r\n            borderRadius: '8px',\r\n            marginBottom: '16px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px'\r\n          }}>\r\n            <span>âš ï¸</span>\r\n            <span>{error}</span>\r\n            <button\r\n              onClick={() => setError(null)}\r\n              style={{\r\n                marginLeft: 'auto',\r\n                background: 'none',\r\n                border: 'none',\r\n                fontSize: '18px',\r\n                cursor: 'pointer',\r\n                color: '#b91c1c'\r\n              }}\r\n            >\r\n              âœ•\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '12px' }}>\r\n          <div style={{ backgroundColor: '#ede9fe', padding: '16px', borderRadius: '10px', border: '1px solid #ddd6fe' }}>\r\n            <div style={{ fontSize: '24px', fontWeight: '700', color: '#7c3aed' }}>\r\n              {estadisticas.total}\r\n            </div>\r\n            <div style={{ fontSize: '12px', color: '#6d28d9', fontWeight: '500' }}>Total Mensajes</div>\r\n          </div>\r\n\r\n          <div style={{ backgroundColor: '#dbeafe', padding: '16px', borderRadius: '10px', border: '1px solid #bfdbfe' }}>\r\n            <div style={{ fontSize: '24px', fontWeight: '700', color: '#2563eb' }}>\r\n              {conversaciones.length}\r\n            </div>\r\n            <div style={{ fontSize: '12px', color: '#1d4ed8', fontWeight: '500' }}>Conversaciones</div>\r\n          </div>\r\n\r\n          <div style={{ backgroundColor: '#fef3c7', padding: '16px', borderRadius: '10px', border: '1px solid #fde68a' }}>\r\n            <div style={{ fontSize: '24px', fontWeight: '700', color: '#d97706' }}>\r\n              {estadisticas.noLeidos}\r\n            </div>\r\n            <div style={{ fontSize: '12px', color: '#b45309', fontWeight: '500' }}>Sin Leer</div>\r\n          </div>\r\n\r\n          <div style={{ backgroundColor: '#dcfce7', padding: '16px', borderRadius: '10px', border: '1px solid #a7f3d0' }}>\r\n            <div style={{ fontSize: '24px', fontWeight: '700', color: '#059669' }}>\r\n              {estadisticas.leidos}\r\n            </div>\r\n            <div style={{ fontSize: '12px', color: '#047857', fontWeight: '500' }}>LeÃ­dos</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Layout principal estilo WhatsApp */}\r\n      <div style={{ flex: 1, display: 'flex', overflow: 'hidden' }}>\r\n        {/* Panel izquierdo: Lista de conversaciones (solo para docentes) */}\r\n        {esDocente && (\r\n        <div style={{\r\n          width: '350px',\r\n          backgroundColor: 'white',\r\n          borderRight: '1px solid #e5e7eb',\r\n          display: 'flex',\r\n          flexDirection: 'column'\r\n        }}>\r\n          {/* BÃºsqueda y botÃ³n nuevo */}\r\n          <div style={{ padding: '16px', borderBottom: '1px solid #e5e7eb' }}>\r\n            <div style={{ marginBottom: '12px' }}>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"ðŸ” Buscar conversaciÃ³n...\"\r\n                value={busqueda}\r\n                onChange={(e) => setBusqueda(e.target.value)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '10px 12px',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '8px',\r\n                  fontSize: '14px'\r\n                }}\r\n              />\r\n            </div>\r\n            <button\r\n              onClick={() => setMostrarNuevoMensaje(true)}\r\n              style={{\r\n                width: '100%',\r\n                backgroundColor: '#3b82f6',\r\n                color: 'white',\r\n                padding: '10px',\r\n                borderRadius: '8px',\r\n                border: 'none',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                gap: '8px'\r\n              }}\r\n            >\r\n              âœï¸ Nuevo Mensaje\r\n            </button>\r\n          </div>\r\n\r\n          {/* Lista de conversaciones */}\r\n          <div style={{ flex: 1, overflowY: 'auto' }}>\r\n            {loading ? (\r\n              <div style={{ padding: '40px', textAlign: 'center', color: '#9ca3af' }}>\r\n                <div style={{ fontSize: '32px', marginBottom: '12px' }}>â³</div>\r\n                <p>Cargando...</p>\r\n              </div>\r\n            ) : conversacionesFiltradas.length === 0 ? (\r\n              <div style={{ padding: '40px', textAlign: 'center', color: '#9ca3af' }}>\r\n                <div style={{ fontSize: '48px', marginBottom: '12px' }}>ðŸ“­</div>\r\n                <p style={{ fontSize: '14px' }}>No hay conversaciones</p>\r\n              </div>\r\n            ) : (\r\n              conversacionesFiltradas.map((conv) => (\r\n                <div\r\n                  key={conv.estudiante_id}\r\n                  onClick={() => setConversacionActiva(conv.estudiante_id)}\r\n                  style={{\r\n                    padding: '16px',\r\n                    borderBottom: '1px solid #f3f4f6',\r\n                    cursor: 'pointer',\r\n                    backgroundColor: conversacionActiva === conv.estudiante_id ? '#f0f9ff' : 'white',\r\n                    transition: 'background-color 0.2s'\r\n                  }}\r\n                  onMouseOver={(e) => {\r\n                    if (conversacionActiva !== conv.estudiante_id) {\r\n                      e.currentTarget.style.backgroundColor = '#f9fafb';\r\n                    }\r\n                  }}\r\n                  onMouseOut={(e) => {\r\n                    if (conversacionActiva !== conv.estudiante_id) {\r\n                      e.currentTarget.style.backgroundColor = 'white';\r\n                    }\r\n                  }}\r\n                >\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                    <div style={{\r\n                      width: '48px',\r\n                      height: '48px',\r\n                      borderRadius: '50%',\r\n                      backgroundColor: '#e0e7ff',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      fontSize: '20px',\r\n                      fontWeight: '600',\r\n                      color: '#4f46e5',\r\n                      flexShrink: 0\r\n                    }}>\r\n                      {conv.estudiante_nombre.charAt(0)}{conv.estudiante_apellido.charAt(0)}\r\n                    </div>\r\n                    <div style={{ flex: 1, minWidth: 0 }}>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '4px' }}>\r\n                        <div style={{ fontWeight: '600', color: '#1f2937', fontSize: '14px' }}>\r\n                          {conv.estudiante_apellido} {conv.estudiante_nombre}\r\n                        </div>\r\n                        {conv.mensajes_no_leidos > 0 && (\r\n                          <div style={{\r\n                            backgroundColor: '#3b82f6',\r\n                            color: 'white',\r\n                            borderRadius: '12px',\r\n                            padding: '2px 8px',\r\n                            fontSize: '11px',\r\n                            fontWeight: '700'\r\n                          }}>\r\n                            {conv.mensajes_no_leidos}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      <div style={{ fontSize: '11px', color: '#9ca3af', marginBottom: '4px' }}>\r\n                        {conv.estudiante_grado}{conv.estudiante_seccion}\r\n                      </div>\r\n                      <div style={{\r\n                        fontSize: '13px',\r\n                        color: '#6b7280',\r\n                        whiteSpace: 'nowrap',\r\n                        overflow: 'hidden',\r\n                        textOverflow: 'ellipsis'\r\n                      }}>\r\n                        {conv.ultimo_mensaje}\r\n                      </div>\r\n                      <div style={{ marginTop: '4px' }}>\r\n                        {getTipoBadge(conv.ultimo_mensaje_tipo)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n        )}\r\n\r\n        {/* Panel derecho: Chat activo o formulario nuevo mensaje */}\r\n        <div style={{ flex: 1, display: 'flex', flexDirection: 'column', backgroundColor: '#f9fafb' }}>\r\n          {mostrarNuevoMensaje ? (\r\n            // Formulario nuevo mensaje\r\n            <div style={{ flex: 1, padding: '24px', overflowY: 'auto' }}>\r\n              <div style={{ maxWidth: '700px', margin: '0 auto' }}>\r\n                <div style={{\r\n                  backgroundColor: 'white',\r\n                  borderRadius: '12px',\r\n                  padding: '24px',\r\n                  boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\r\n                  border: '1px solid #e5e7eb'\r\n                }}>\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px' }}>\r\n                    <h2 style={{ fontSize: '20px', fontWeight: '600', color: '#374151' }}>\r\n                      âœï¸ Nuevo Mensaje\r\n                    </h2>\r\n                    <button\r\n                      onClick={() => setMostrarNuevoMensaje(false)}\r\n                      style={{\r\n                        background: 'none',\r\n                        border: 'none',\r\n                        fontSize: '24px',\r\n                        cursor: 'pointer',\r\n                        color: '#9ca3af'\r\n                      }}\r\n                    >\r\n                      âœ•\r\n                    </button>\r\n                  </div>\r\n\r\n                  <form onSubmit={handleEnviarMensaje}>\r\n                    <div style={{ marginBottom: '20px' }}>\r\n                      <label style={labelStyle}>Estudiante *</label>\r\n                      <select\r\n                        value={formMensaje.estudiante_id}\r\n                        onChange={(e) => setFormMensaje({ ...formMensaje, estudiante_id: e.target.value })}\r\n                        style={inputStyle}\r\n                        required\r\n                      >\r\n                        <option value=\"\">Seleccionar estudiante</option>\r\n                        {estudiantesFiltrados.map(est => (\r\n                          <option key={est.id} value={est.id}>\r\n                            {est.apellido} {est.nombre} - {est.grado}{est.seccion}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '16px', marginBottom: '20px' }}>\r\n                      <div>\r\n                        <label style={labelStyle}>Destinatario *</label>\r\n                        <select\r\n                          value={formMensaje.destinatario_tipo}\r\n                          onChange={(e) => setFormMensaje({ ...formMensaje, destinatario_tipo: e.target.value as any })}\r\n                          style={inputStyle}\r\n                        >\r\n                          <option value=\"tutor\">ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦ Tutor/Apoderado</option>\r\n                          <option value=\"estudiante\">ðŸŽ“ Estudiante</option>\r\n                        </select>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label style={labelStyle}>Tipo de Mensaje *</label>\r\n                        <select\r\n                          value={formMensaje.tipo}\r\n                          onChange={(e) => setFormMensaje({ ...formMensaje, tipo: e.target.value as any })}\r\n                          style={inputStyle}\r\n                        >\r\n                          <option value=\"general\">ðŸ’¬ General</option>\r\n                          <option value=\"academico\">ðŸ“š AcadÃ©mico</option>\r\n                          <option value=\"conductual\">âš ï¸ Conductual</option>\r\n                          <option value=\"urgente\">ðŸš¨ Urgente</option>\r\n                          <option value=\"felicitacion\">ðŸŽ‰ FelicitaciÃ³n</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '20px' }}>\r\n                      <label style={labelStyle}>Asunto *</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={formMensaje.asunto}\r\n                        onChange={(e) => setFormMensaje({ ...formMensaje, asunto: e.target.value })}\r\n                        style={inputStyle}\r\n                        placeholder=\"Ej: RevisiÃ³n de calificaciones\"\r\n                        required\r\n                      />\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '16px' }}>\r\n                      <label style={labelStyle}>Mensaje *</label>\r\n                      <textarea\r\n                        value={formMensaje.mensaje}\r\n                        onChange={(e) => setFormMensaje({ ...formMensaje, mensaje: e.target.value })}\r\n                        style={{ ...inputStyle, minHeight: '120px', resize: 'vertical' }}\r\n                        placeholder=\"Escribe tu mensaje aquÃ­...\"\r\n                        required\r\n                      />\r\n                    </div>\r\n\r\n                    {/* Respuestas rÃ¡pidas */}\r\n                    <div style={{ marginBottom: '20px' }}>\r\n                      <label style={{ ...labelStyle, marginBottom: '8px' }}>âš¡ Respuestas RÃ¡pidas:</label>\r\n                      <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>\r\n                        {RESPUESTAS_RAPIDAS.map((respuesta, idx) => (\r\n                          <button\r\n                            key={idx}\r\n                            type=\"button\"\r\n                            onClick={() => handleRespuestaRapida(respuesta)}\r\n                            style={{\r\n                              backgroundColor: '#f3f4f6',\r\n                              border: '1px solid #d1d5db',\r\n                              padding: '6px 12px',\r\n                              borderRadius: '16px',\r\n                              fontSize: '12px',\r\n                              cursor: 'pointer',\r\n                              transition: 'all 0.2s'\r\n                            }}\r\n                            onMouseOver={(e) => {\r\n                              e.currentTarget.style.backgroundColor = '#e5e7eb';\r\n                              e.currentTarget.style.borderColor = '#9ca3af';\r\n                            }}\r\n                            onMouseOut={(e) => {\r\n                              e.currentTarget.style.backgroundColor = '#f3f4f6';\r\n                              e.currentTarget.style.borderColor = '#d1d5db';\r\n                            }}\r\n                          >\r\n                            {respuesta}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'flex', gap: '12px' }}>\r\n                      <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        style={{\r\n                          flex: 1,\r\n                          backgroundColor: loading ? '#9ca3af' : '#10b981',\r\n                          color: 'white',\r\n                          padding: '12px',\r\n                          borderRadius: '8px',\r\n                          border: 'none',\r\n                          fontSize: '15px',\r\n                          fontWeight: '600',\r\n                          cursor: loading ? 'not-allowed' : 'pointer'\r\n                        }}\r\n                      >\r\n                        {loading ? 'â³ Enviando...' : 'ðŸ“¤ Enviar Mensaje'}\r\n                      </button>\r\n\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setMostrarNuevoMensaje(false)}\r\n                        style={{\r\n                          backgroundColor: '#6b7280',\r\n                          color: 'white',\r\n                          padding: '12px 24px',\r\n                          borderRadius: '8px',\r\n                          border: 'none',\r\n                          fontSize: '15px',\r\n                          fontWeight: '600',\r\n                          cursor: 'pointer'\r\n                        }}\r\n                      >\r\n                        Cancelar\r\n                      </button>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (esDocente && conversacionActiva && estudianteActivo) || (esEstudiante && mensajesActivos.length > 0) ? (\r\n            // Vista de chat\r\n            <>\r\n              {/* Header del chat */}\r\n              <div style={{\r\n                backgroundColor: 'white',\r\n                padding: '16px 24px',\r\n                borderBottom: '1px solid #e5e7eb',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '12px'\r\n              }}>\r\n                {esDocente && estudianteActivo ? (\r\n                  <>\r\n                    <div style={{\r\n                      width: '48px',\r\n                      height: '48px',\r\n                      borderRadius: '50%',\r\n                      backgroundColor: '#e0e7ff',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      fontSize: '20px',\r\n                      fontWeight: '600',\r\n                      color: '#4f46e5'\r\n                    }}>\r\n                      {estudianteActivo.estudiante_nombre.charAt(0)}{estudianteActivo.estudiante_apellido.charAt(0)}\r\n                    </div>\r\n                    <div style={{ flex: 1 }}>\r\n                      <div style={{ fontWeight: '600', fontSize: '16px', color: '#1f2937' }}>\r\n                        {estudianteActivo.estudiante_apellido} {estudianteActivo.estudiante_nombre}\r\n                      </div>\r\n                      <div style={{ fontSize: '13px', color: '#6b7280' }}>\r\n                        {estudianteActivo.estudiante_grado}{estudianteActivo.estudiante_seccion} â€¢ {estudianteActivo.total_mensajes} mensajes\r\n                      </div>\r\n                    </div>\r\n                    <button\r\n                      onClick={() => setConversacionActiva(null)}\r\n                      style={{\r\n                        background: 'none',\r\n                        border: 'none',\r\n                        fontSize: '24px',\r\n                        cursor: 'pointer',\r\n                        color: '#9ca3af'\r\n                      }}\r\n                    >\r\n                      âœ•\r\n                    </button>\r\n                  </>\r\n                ) : esEstudiante ? (\r\n                  <>\r\n                    <div style={{\r\n                      width: '48px',\r\n                      height: '48px',\r\n                      borderRadius: '50%',\r\n                      backgroundColor: '#e0e7ff',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      fontSize: '20px',\r\n                      fontWeight: '600',\r\n                      color: '#4f46e5'\r\n                    }}>\r\n                      ðŸ“¨\r\n                    </div>\r\n                    <div style={{ flex: 1 }}>\r\n                      <div style={{ fontWeight: '600', fontSize: '16px', color: '#1f2937' }}>\r\n                        Mis Mensajes Recibidos\r\n                      </div>\r\n                      <div style={{ fontSize: '13px', color: '#6b7280' }}>\r\n                        {mensajesActivos.length} mensajes â€¢ {mensajesActivos.filter(m => !m.leido).length} sin leer\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                ) : null}\r\n              </div>\r\n\r\n              {/* Mensajes */}\r\n              <div style={{\r\n                flex: 1,\r\n                overflowY: 'auto',\r\n                padding: '24px',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                gap: '16px'\r\n              }}>\r\n                {mensajesActivos.length === 0 ? (\r\n                  <div style={{ textAlign: 'center', padding: '60px 20px', color: '#9ca3af' }}>\r\n                    <div style={{ fontSize: '64px', marginBottom: '16px' }}>ðŸ’¬</div>\r\n                    <p style={{ fontSize: '16px', fontWeight: '500', color: '#6b7280' }}>\r\n                      No hay mensajes en esta conversaciÃ³n\r\n                    </p>\r\n                    <p style={{ fontSize: '14px', marginTop: '8px' }}>\r\n                      Â¡EnvÃ­a el primer mensaje!\r\n                    </p>\r\n                  </div>\r\n                ) : (\r\n                  mensajesActivos.map((mensaje) => (\r\n                    <div\r\n                      key={mensaje.id}\r\n                      style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'flex-end',\r\n                        marginBottom: '8px'\r\n                      }}\r\n                    >\r\n                      <div style={{\r\n                        maxWidth: '70%',\r\n                        backgroundColor: '#3b82f6',\r\n                        color: 'white',\r\n                        padding: '12px 16px',\r\n                        borderRadius: '16px 16px 4px 16px',\r\n                        boxShadow: '0 2px 4px rgba(59, 130, 246, 0.3)'\r\n                      }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\r\n                          {getTipoBadge(mensaje.tipo || 'general')}\r\n                          <span style={{ fontSize: '11px', opacity: 0.9 }}>\r\n                            â†’ {mensaje.destinatario_tipo}\r\n                          </span>\r\n                        </div>\r\n                        <div style={{ fontWeight: '600', fontSize: '14px', marginBottom: '8px' }}>\r\n                          {mensaje.asunto}\r\n                        </div>\r\n                        <div style={{ fontSize: '14px', lineHeight: '1.5', marginBottom: '8px' }}>\r\n                          {mensaje.mensaje}\r\n                        </div>\r\n                        <div style={{ fontSize: '11px', opacity: 0.8, textAlign: 'right' }}>\r\n                          {new Date(mensaje.created_at!).toLocaleString('es-ES', {\r\n                            day: '2-digit',\r\n                            month: '2-digit',\r\n                            year: 'numeric',\r\n                            hour: '2-digit',\r\n                            minute: '2-digit'\r\n                          })}\r\n                          {mensaje.leido && ' â€¢ âœ“âœ“ LeÃ­do'}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                )}\r\n                <div ref={chatEndRef} />\r\n              </div>\r\n\r\n              {/* BotÃ³n flotante para nuevo mensaje en esta conversaciÃ³n (solo docentes) */}\r\n              {esDocente && conversacionActiva && (\r\n                <div style={{\r\n                  backgroundColor: 'white',\r\n                  borderTop: '1px solid #e5e7eb',\r\n                  padding: '16px 24px'\r\n                }}>\r\n                  <button\r\n                    onClick={() => {\r\n                      setFormMensaje({\r\n                        ...formMensaje,\r\n                        estudiante_id: conversacionActiva.toString()\r\n                      });\r\n                      setMostrarNuevoMensaje(true);\r\n                    }}\r\n                    style={{\r\n                      width: '100%',\r\n                      backgroundColor: '#3b82f6',\r\n                      color: 'white',\r\n                      padding: '12px',\r\n                      borderRadius: '8px',\r\n                      border: 'none',\r\n                      fontSize: '14px',\r\n                      fontWeight: '600',\r\n                      cursor: 'pointer',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      gap: '8px'\r\n                    }}\r\n                  >\r\n                    âœï¸ Escribir Nuevo Mensaje\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            // Estado vacÃ­o\r\n            <div style={{\r\n              flex: 1,\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              flexDirection: 'column',\r\n              color: '#9ca3af'\r\n            }}>\r\n              <div style={{ fontSize: '96px', marginBottom: '24px' }}>ðŸ’¬</div>\r\n              <h3 style={{ fontSize: '20px', fontWeight: '600', color: '#6b7280', marginBottom: '8px' }}>\r\n                Selecciona una conversaciÃ³n\r\n              </h3>\r\n              <p style={{ fontSize: '14px' }}>\r\n                o crea un nuevo mensaje con el botÃ³n de arriba\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst labelStyle: React.CSSProperties = {\r\n  display: 'block',\r\n  marginBottom: '8px',\r\n  fontWeight: '500',\r\n  fontSize: '14px',\r\n  color: '#374151'\r\n};\r\n\r\nconst inputStyle: React.CSSProperties = {\r\n  width: '100%',\r\n  padding: '10px 12px',\r\n  border: '1px solid #d1d5db',\r\n  borderRadius: '8px',\r\n  fontSize: '14px',\r\n  outline: 'none'\r\n};\r\n\r\nexport default MessagingSystem;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}