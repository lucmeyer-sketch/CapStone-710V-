{"ast":null,"code":"import { supabase } from '../supabaseClient';\n// obtener todas las clases con relaciones\nexport const getAllClases = async () => {\n  const {\n    data,\n    error\n  } = await supabase.from('clases').select(`\n      *,\n      materia:materias (*),\n      docente:docentes (*)\n    `).order('grado', {\n    ascending: true\n  });\n  if (error) throw error;\n  return data || [];\n};\n\n// obtener clase por ID con relaciones\nexport const getClaseById = async id => {\n  const {\n    data,\n    error\n  } = await supabase.from('clases').select(`\n      *,\n      materia:materias (*),\n      docente:docentes (*)\n    `).eq('id', id).single();\n  if (error) throw error;\n  return data;\n};\n\n// obtener clases por grado y sección\nexport const getClasesByGradoSeccion = async (grado, seccion) => {\n  const {\n    data,\n    error\n  } = await supabase.from('clases').select(`\n      *,\n      materia:materias (*),\n      docente:docentes (*)\n    `).eq('grado', grado).eq('seccion', seccion).eq('estado', 'activo').order('materia.nombre', {\n    ascending: true\n  });\n  if (error) throw error;\n  return data || [];\n};\n\n// obtener clases de un docente\nexport const getClasesByDocente = async docenteId => {\n  const {\n    data,\n    error\n  } = await supabase.from('clases').select(`\n      *,\n      materia:materias (*),\n      docente:docentes (*)\n    `).eq('docente_id', docenteId).eq('estado', 'activo');\n  if (error) throw error;\n  return data || [];\n};\n\n// crear clase\nexport const createClase = async clase => {\n  const {\n    data,\n    error\n  } = await supabase.from('clases').insert({\n    materia_id: clase.materia_id,\n    docente_id: clase.docente_id,\n    grado: clase.grado,\n    seccion: clase.seccion,\n    horario: clase.horario,\n    aula: clase.aula,\n    periodo: clase.periodo,\n    estado: clase.estado || 'activo'\n  }).select().single();\n  if (error) throw error;\n  return data;\n};\n\n// actualizar clase\nexport const updateClase = async (id, clase) => {\n  const {\n    data,\n    error\n  } = await supabase.from('clases').update(clase).eq('id', id).select().single();\n  if (error) throw error;\n  return data;\n};\n\n// eliminar clase\nexport const deleteClase = async id => {\n  const {\n    error\n  } = await supabase.from('clases').delete().eq('id', id);\n  if (error) throw error;\n};","map":{"version":3,"names":["supabase","getAllClases","data","error","from","select","order","ascending","getClaseById","id","eq","single","getClasesByGradoSeccion","grado","seccion","getClasesByDocente","docenteId","createClase","clase","insert","materia_id","docente_id","horario","aula","periodo","estado","updateClase","update","deleteClase","delete"],"sources":["C:/Users/diego/OneDrive/Escritorio/ProyectoAPT/CapStone-710V-/Proyecto/src/services/claseService.ts"],"sourcesContent":["import { supabase } from '../supabaseClient';\r\nimport { Clase } from '../types/database';\r\n\r\n// obtener todas las clases con relaciones\r\nexport const getAllClases = async (): Promise<Clase[]> => {\r\n  const { data, error } = await supabase\r\n    .from('clases')\r\n    .select(`\r\n      *,\r\n      materia:materias (*),\r\n      docente:docentes (*)\r\n    `)\r\n    .order('grado', { ascending: true });\r\n\r\n  if (error) throw error;\r\n  return data || [];\r\n};\r\n\r\n// obtener clase por ID con relaciones\r\nexport const getClaseById = async (id: string): Promise<Clase | null> => {\r\n  const { data, error } = await supabase\r\n    .from('clases')\r\n    .select(`\r\n      *,\r\n      materia:materias (*),\r\n      docente:docentes (*)\r\n    `)\r\n    .eq('id', id)\r\n    .single();\r\n\r\n  if (error) throw error;\r\n  return data;\r\n};\r\n\r\n// obtener clases por grado y sección\r\nexport const getClasesByGradoSeccion = async (\r\n  grado: string,\r\n  seccion: string\r\n): Promise<Clase[]> => {\r\n  const { data, error } = await supabase\r\n    .from('clases')\r\n    .select(`\r\n      *,\r\n      materia:materias (*),\r\n      docente:docentes (*)\r\n    `)\r\n    .eq('grado', grado)\r\n    .eq('seccion', seccion)\r\n    .eq('estado', 'activo')\r\n    .order('materia.nombre', { ascending: true });\r\n\r\n  if (error) throw error;\r\n  return data || [];\r\n};\r\n\r\n// obtener clases de un docente\r\nexport const getClasesByDocente = async (docenteId: string): Promise<Clase[]> => {\r\n  const { data, error } = await supabase\r\n    .from('clases')\r\n    .select(`\r\n      *,\r\n      materia:materias (*),\r\n      docente:docentes (*)\r\n    `)\r\n    .eq('docente_id', docenteId)\r\n    .eq('estado', 'activo');\r\n\r\n  if (error) throw error;\r\n  return data || [];\r\n};\r\n\r\n// crear clase\r\nexport const createClase = async (\r\n  clase: Omit<Clase, 'id' | 'created_at' | 'updated_at'>\r\n): Promise<Clase> => {\r\n  const { data, error } = await supabase\r\n    .from('clases')\r\n    .insert({\r\n      materia_id: clase.materia_id,\r\n      docente_id: clase.docente_id,\r\n      grado: clase.grado,\r\n      seccion: clase.seccion,\r\n      horario: clase.horario,\r\n      aula: clase.aula,\r\n      periodo: clase.periodo,\r\n      estado: clase.estado || 'activo',\r\n    })\r\n    .select()\r\n    .single();\r\n\r\n  if (error) throw error;\r\n  return data;\r\n};\r\n\r\n// actualizar clase\r\nexport const updateClase = async (\r\n  id: string,\r\n  clase: Partial<Omit<Clase, 'id' | 'created_at' | 'updated_at'>>\r\n): Promise<Clase> => {\r\n  const { data, error } = await supabase\r\n    .from('clases')\r\n    .update(clase)\r\n    .eq('id', id)\r\n    .select()\r\n    .single();\r\n\r\n  if (error) throw error;\r\n  return data;\r\n};\r\n\r\n// eliminar clase\r\nexport const deleteClase = async (id: string): Promise<void> => {\r\n  const { error } = await supabase\r\n    .from('clases')\r\n    .delete()\r\n    .eq('id', id);\r\n\r\n  if (error) throw error;\r\n};\r\n\r\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,mBAAmB;AAG5C;AACA,OAAO,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAA8B;EACxD,MAAM;IAAEC,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CACnCI,IAAI,CAAC,QAAQ,CAAC,CACdC,MAAM,CAAC;AACZ;AACA;AACA;AACA,KAAK,CAAC,CACDC,KAAK,CAAC,OAAO,EAAE;IAAEC,SAAS,EAAE;EAAK,CAAC,CAAC;EAEtC,IAAIJ,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI,IAAI,EAAE;AACnB,CAAC;;AAED;AACA,OAAO,MAAMM,YAAY,GAAG,MAAOC,EAAU,IAA4B;EACvE,MAAM;IAAEP,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CACnCI,IAAI,CAAC,QAAQ,CAAC,CACdC,MAAM,CAAC;AACZ;AACA;AACA;AACA,KAAK,CAAC,CACDK,EAAE,CAAC,IAAI,EAAED,EAAE,CAAC,CACZE,MAAM,CAAC,CAAC;EAEX,IAAIR,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI;AACb,CAAC;;AAED;AACA,OAAO,MAAMU,uBAAuB,GAAG,MAAAA,CACrCC,KAAa,EACbC,OAAe,KACM;EACrB,MAAM;IAAEZ,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CACnCI,IAAI,CAAC,QAAQ,CAAC,CACdC,MAAM,CAAC;AACZ;AACA;AACA;AACA,KAAK,CAAC,CACDK,EAAE,CAAC,OAAO,EAAEG,KAAK,CAAC,CAClBH,EAAE,CAAC,SAAS,EAAEI,OAAO,CAAC,CACtBJ,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,CACtBJ,KAAK,CAAC,gBAAgB,EAAE;IAAEC,SAAS,EAAE;EAAK,CAAC,CAAC;EAE/C,IAAIJ,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI,IAAI,EAAE;AACnB,CAAC;;AAED;AACA,OAAO,MAAMa,kBAAkB,GAAG,MAAOC,SAAiB,IAAuB;EAC/E,MAAM;IAAEd,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CACnCI,IAAI,CAAC,QAAQ,CAAC,CACdC,MAAM,CAAC;AACZ;AACA;AACA;AACA,KAAK,CAAC,CACDK,EAAE,CAAC,YAAY,EAAEM,SAAS,CAAC,CAC3BN,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC;EAEzB,IAAIP,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI,IAAI,EAAE;AACnB,CAAC;;AAED;AACA,OAAO,MAAMe,WAAW,GAAG,MACzBC,KAAsD,IACnC;EACnB,MAAM;IAAEhB,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CACnCI,IAAI,CAAC,QAAQ,CAAC,CACde,MAAM,CAAC;IACNC,UAAU,EAAEF,KAAK,CAACE,UAAU;IAC5BC,UAAU,EAAEH,KAAK,CAACG,UAAU;IAC5BR,KAAK,EAAEK,KAAK,CAACL,KAAK;IAClBC,OAAO,EAAEI,KAAK,CAACJ,OAAO;IACtBQ,OAAO,EAAEJ,KAAK,CAACI,OAAO;IACtBC,IAAI,EAAEL,KAAK,CAACK,IAAI;IAChBC,OAAO,EAAEN,KAAK,CAACM,OAAO;IACtBC,MAAM,EAAEP,KAAK,CAACO,MAAM,IAAI;EAC1B,CAAC,CAAC,CACDpB,MAAM,CAAC,CAAC,CACRM,MAAM,CAAC,CAAC;EAEX,IAAIR,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI;AACb,CAAC;;AAED;AACA,OAAO,MAAMwB,WAAW,GAAG,MAAAA,CACzBjB,EAAU,EACVS,KAA+D,KAC5C;EACnB,MAAM;IAAEhB,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMH,QAAQ,CACnCI,IAAI,CAAC,QAAQ,CAAC,CACduB,MAAM,CAACT,KAAK,CAAC,CACbR,EAAE,CAAC,IAAI,EAAED,EAAE,CAAC,CACZJ,MAAM,CAAC,CAAC,CACRM,MAAM,CAAC,CAAC;EAEX,IAAIR,KAAK,EAAE,MAAMA,KAAK;EACtB,OAAOD,IAAI;AACb,CAAC;;AAED;AACA,OAAO,MAAM0B,WAAW,GAAG,MAAOnB,EAAU,IAAoB;EAC9D,MAAM;IAAEN;EAAM,CAAC,GAAG,MAAMH,QAAQ,CAC7BI,IAAI,CAAC,QAAQ,CAAC,CACdyB,MAAM,CAAC,CAAC,CACRnB,EAAE,CAAC,IAAI,EAAED,EAAE,CAAC;EAEf,IAAIN,KAAK,EAAE,MAAMA,KAAK;AACxB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}